{"version":3,"file":"play.js","sources":["config.js","lib/jquery.blockUI.js","sewisecontrol.js","clip.js","play.js"],"names":[],"mappings":"AAAA,OAAA,YAAA,WACA,UAAA,QACA,OACA,eAAA,iBACA,OAAA,oBACA,QAAA,qBACA,UAAA,gBACA,OAAA,aACA,cAAA,gBACA,SAAA,WACA,KAAA,OACA,eAAA,iBACA,QAAA,WAEA,MACA,SACA,MAAA,mBAEA,WACA,MAAA,wBCLA,WAIA,QAAA,GAAA,GAuOA,QAAA,GAAA,EAAA,GACA,GAAA,GAAA,EACA,EAAA,GAAA,OACA,EAAA,GAAA,SAAA,EAAA,QAAA,EAAA,QAAA,MAGA,IAFA,EAAA,EAAA,UAAA,EAAA,QAAA,SAAA,QAEA,EAAA,kBAAA,EAAA,GAAA,KAAA,qBAAA,CAkBA,GAfA,EAAA,WAAA,EAAA,UAAA,EAAA,QAAA,SAAA,WAAA,EAAA,gBACA,EAAA,EAAA,UAAA,EAAA,QAAA,SAAA,IAAA,EAAA,SACA,EAAA,iBACA,EAAA,WAAA,OAAA,WAEA,EAAA,EAAA,UAAA,EAAA,QAAA,SAAA,UAAA,EAAA,eACA,EAAA,SAAA,EAAA,EAAA,QAAA,EAGA,GAAA,GACA,EAAA,QAAA,QAAA,IAKA,GAAA,gBAAA,KAAA,EAAA,YAAA,EAAA,QAAA,CACA,GAAA,GAAA,EAAA,OAAA,EAAA,GAAA,EACA,IACA,GAAA,GAAA,KAAA,kBAAA,GACA,EAAA,GAAA,EACA,EAAA,OAAA,EAAA,WACA,EAAA,QAAA,EAAA,MAAA,QACA,EAAA,SAAA,EAAA,MAAA,SACA,EAAA,QACA,EAAA,OAAA,YAAA,GAGA,EAAA,GAAA,KAAA,oBAAA,EAAA,UACA,IAMA,GAAA,EAAA,EAAA,EANA,EAAA,EAAA,KAQA,GAAA,EADA,GAAA,EAAA,YACA,0CAAA,KAAA,4GAAA,EAAA,UAAA,cAEA,oDAGA,EAAA,EADA,EAAA,MACA,sEAAA,KAAA,wBAEA,oDAAA,KAAA,4FAEA,EAAA,OAAA,GACA,EAAA,uBAAA,EAAA,cAAA,iEAAA,EAAA,IAAA,iCACA,EAAA,QACA,GAAA,8EAAA,EAAA,OAAA,UAAA,UAEA,GAAA,0DACA,GAAA,UAEA,EAAA,OACA,EAAA,uBAAA,EAAA,cAAA,oEAAA,EAAA,IAAA,oCACA,EAAA,QACA,GAAA,8EAAA,EAAA,OAAA,UAAA,UAEA,GAAA,0DACA,GAAA,UAGA,EADA,EACA,uBAAA,EAAA,cAAA,+BAAA,EAAA,IAAA,uCAGA,uBAAA,EAAA,cAAA,kCAAA,EAAA,IAAA,0CAEA,EAAA,EAAA,GAGA,IACA,EAAA,OACA,EAAA,IAAA,GACA,EAAA,SAAA,sBAGA,EAAA,IAAA,IAIA,EAAA,OACA,EAAA,IAAA,EAAA,YACA,EAAA,IAAA,WAAA,EAAA,QAAA,aAGA,GAAA,EAAA,cACA,EAAA,IAAA,UAAA,EAGA,IAAA,IAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,OAAA,EACA,GAAA,KAAA,EAAA,WACA,KAAA,SAAA,KAGA,EAAA,OAAA,EAAA,WAAA,EAAA,GAAA,WACA,EAAA,WACA,OAAA,sBACA,OAAA,MAKA,IAAA,GAAA,KAAA,EAAA,QAAA,UAAA,EAAA,eAAA,EAAA,KAAA,GAAA,OAAA,EACA,IAAA,GAAA,EAAA,CAMA,GAJA,GAAA,EAAA,kBAAA,EAAA,QAAA,UACA,EAAA,aAAA,IAAA,SAAA,SAGA,IAAA,EAAA,QAAA,YAAA,EACA,GAAA,GAAA,EAAA,EAAA,kBAAA,EAAA,EAAA,EAAA,mBACA,EAAA,EAAA,QAAA,EAAA,IAAA,EACA,EAAA,EAAA,QAAA,EAAA,IAAA,CAIA,GAAA,KAAA,EAAA,SAAA,EAAA,GACA,GAAA,GAAA,EAAA,GAAA,KAEA,IADA,EAAA,SAAA,WACA,EAAA,EACA,EACA,EAAA,cAAA,SAAA,iGAAA,EAAA,qBAAA,YAEA,EAAA,cAAA,SAAA,uCACA,EACA,EAAA,cAAA,QAAA,uGAEA,EAAA,cAAA,QAAA,sCACA,GAAA,EAAA,cAAA,OAAA,GACA,GAAA,EAAA,cAAA,MAAA,OAEA,IAAA,EAAA,QACA,GAAA,EAAA,cAAA,MAAA,2NACA,EAAA,UAAA,MAEA,KAAA,EAAA,SAAA,EAAA,CACA,GAAA,GAAA,EAAA,KAAA,EAAA,IAAA,IAAA,SAAA,EAAA,IAAA,IAAA,IAAA,EACA,EAAA,0GAAA,EAAA,UACA,GAAA,cAAA,MAAA,MAiBA,GAXA,IACA,EAAA,MACA,EAAA,KAAA,sBAAA,OAAA,GAEA,EAAA,OAAA,IACA,EAAA,QAAA,EAAA,WACA,EAAA,GAAA,SAGA,GAAA,EAAA,cAAA,EAAA,aACA,EAAA,OACA,EAAA,OAAA,CACA,GAAA,GAAA,EAAA,QAAA,EAAA,QAAA,EACA,EAAA,EAAA,cAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,CACA,GAAA,aACA,EAAA,QAAA,EAAA,OAAA,GACA,GACA,EAAA,QAAA,EAAA,OAAA,OAGA,GAAA,aACA,EAAA,OACA,GACA,EAAA,OACA,EAAA,SACA,EAAA,SAeA,IAXA,EAAA,EAAA,EAAA,GAEA,GACA,EAAA,EAAA,GACA,EAAA,EAAA,EAAA,kBAAA,GACA,EAAA,YACA,WAAA,EAAA,KAGA,EAAA,EAAA,GAAA,EAAA,QAAA,EAAA,SAEA,EAAA,QAAA,CAEA,GAAA,GAAA,WAAA,WACA,EACA,EAAA,UAAA,GAEA,EAAA,GAAA,QAAA,IACA,EAAA,QACA,GAAA,GAAA,KAAA,kBAAA,KAKA,QAAA,GAAA,EAAA,GACA,GAAA,GACA,EAAA,GAAA,OACA,EAAA,EAAA,GACA,EAAA,EAAA,KAAA,mBACA,EAAA,EAAA,KAAA,kBACA,KACA,aAAA,GACA,EAAA,WAAA,oBAEA,EAAA,EAAA,UAAA,EAAA,QAAA,SAAA,OACA,EAAA,EAAA,EAAA,GAEA,OAAA,EAAA,YACA,EAAA,UAAA,EAAA,KAAA,qBACA,EAAA,WAAA,qBAGA,IAAA,EAEA,GADA,EACA,EAAA,QAAA,WAAA,OAAA,YAAA,IAAA,mBAEA,EAAA,KAAA,aAGA,EAAA,cACA,EAAA,OAAA,IACA,EAAA,GAAA,MAAA,OAAA,EAAA,aACA,EAAA,OAAA,IACA,EAAA,GAAA,MAAA,OAAA,EAAA,cAGA,IACA,EAAA,EAAA,MAEA,EAAA,SACA,EAAA,EAAA,OACA,EAAA,OAAA,QAAA,EAAA,QAAA,WACA,MAAA,GACA,EAAA,EAAA,EAAA,EAAA,MAIA,EAAA,EAAA,EAAA,EAAA,GAIA,QAAA,GAAA,EAAA,EAAA,EAAA,GACA,GAAA,GAAA,EAAA,EACA,KAAA,EAAA,KAAA,qBAAA,CAGA,EAAA,KAAA,WAEA,KAAA,YACA,KAAA,WAAA,YAAA,QAGA,GAAA,EAAA,KACA,EAAA,GAAA,MAAA,QAAA,EAAA,QACA,EAAA,GAAA,MAAA,SAAA,EAAA,SACA,EAAA,QACA,EAAA,OAAA,YAAA,EAAA,IACA,EAAA,WAAA,oBAGA,EAAA,KAAA,mBACA,EAAA,IAAA,WAAA,UAGA,kBAAA,GAAA,WACA,EAAA,UAAA,EAAA,EAGA,IAAA,GAAA,EAAA,SAAA,MAAA,EAAA,EAAA,QAAA,EAAA,EAAA,GAAA,MAAA,KACA,GAAA,MAAA,EAAA,GAAA,MAAA,GACA,EAAA,GAAA,MAAA,MAAA,GAIA,QAAA,GAAA,EAAA,EAAA,GACA,GAAA,GAAA,GAAA,OAAA,EAAA,EAAA,EAGA,KAAA,KAAA,GAAA,KAAA,GAAA,EAAA,KAAA,yBAGA,EAAA,KAAA,oBAAA,GAGA,GAAA,EAAA,cAAA,GAAA,EAAA,cAAA,CAIA,GAAA,GAAA,wEACA,GACA,EAAA,UAAA,KAAA,EAAA,EAAA,GAEA,EAAA,UAAA,OAAA,EAAA,IAQA,QAAA,GAAA,GAEA,GAAA,YAAA,EAAA,MAAA,EAAA,SAAA,GAAA,EAAA,SACA,GAAA,EAAA,KAAA,gBAAA,CACA,GAAA,GAAA,EACA,GAAA,EAAA,UAAA,EAAA,SAAA,EAAA,EAAA,OAAA,GACA,EAAA,EAAA,UAAA,EAAA,SAAA,EAAA,EACA,IAAA,GAAA,EAEA,MADA,YAAA,WAAA,EAAA,IAAA,KACA,EAIA,GAAA,GAAA,EAAA,KACA,EAAA,EAAA,EAAA,OAKA,OAJA,GAAA,SAAA,iBAAA,EAAA,gBACA,EAAA,eAAA,GAGA,EAAA,QAAA,OAAA,EAAA,eAAA,OAAA,GACA,EAGA,IAAA,EAAA,UAAA,WAAA,OAAA,eAAA,OAGA,QAAA,GAAA,GACA,GAAA,EAAA,CAEA,GAAA,GAAA,EAAA,KAAA,EAAA,EAAA,OAAA,EAAA,EACA,IACA,EAAA,SAGA,QAAA,GAAA,EAAA,EAAA,GACA,GAAA,GAAA,EAAA,WAAA,EAAA,EAAA,MACA,GAAA,EAAA,YAAA,EAAA,aAAA,EAAA,EAAA,EAAA,mBACA,GAAA,EAAA,aAAA,EAAA,cAAA,EAAA,EAAA,EAAA,iBACA,KAAA,EAAA,KAAA,EAAA,EAAA,EAAA,KAAA,KACA,IAAA,EAAA,IAAA,EAAA,EAAA,EAAA,KAAA,KAGA,QAAA,GAAA,EAAA,GACA,MAAA,UAAA,EAAA,IAAA,EAAA,GAAA,KAAA,EA1kBA,EAAA,GAAA,QAAA,EAAA,GAAA,MAEA,IAAA,GAAA,EAAA,MAAA,aAIA,EAAA,OAAA,KAAA,UAAA,WACA,EAAA,WAAA,KAAA,UAAA,aAAA,WAAA,KAAA,UAAA,WAEA,GADA,SAAA,cAAA,EACA,EAAA,WAAA,SAAA,cAAA,OAAA,MAAA,eAGA,GAAA,QAAA,SAAA,GAAA,EAAA,OAAA,IACA,EAAA,UAAA,SAAA,GAAA,EAAA,OAAA,IAGA,EAAA,QAAA,SAAA,EAAA,EAAA,EAAA,GACA,GAAA,GAAA,EAAA,8BACA,IAAA,EAAA,OAAA,OAAA,EAAA,SACA,GAAA,EAAA,OAAA,OAAA,EAAA,SACA,SAAA,IAAA,EAAA,IAGA,IAAA,GAAA,SAAA,GACA,EAAA,MAEA,EAAA,SACA,QAAA,EACA,OAAA,mBAAA,GAAA,OAAA,EAAA,OAAA,IACA,QAAA,mBAAA,GAAA,QAAA,EAAA,QAAA,IACA,QAAA,mBAAA,GAAA,QAAA,EAAA,QAAA,EACA,SAAA,EACA,aAAA,EACA,UAAA,EACA,IAAA,EAAA,QAAA,SAAA,WAIA,IACA,GAAA,IAAA,UACA,GAAA,UAAA,WACA,GACA,OAAA,EACA,QAAA,KAGA,IAAA,GAAA,EAAA,YACA,GAAA,OACA,EAAA,OAAA,IAAA,KACA,SAAA,WACA,EAAA,aAAA,QAAA,QAMA,EAAA,GAAA,MAAA,SAAA,GACA,GAAA,KAAA,KAAA,OAEA,MADA,GAAA,QAAA,GACA,IAEA,IAAA,GAAA,EAAA,UAAA,EAAA,QAAA,SAAA,MAQA,OAPA,MAAA,KAAA,WACA,GAAA,GAAA,EAAA,KACA,GAAA,iBAAA,EAAA,KAAA,sBAEA,EAAA,SAAA,QAAA,MAGA,KAAA,KAAA,WACA,UAAA,EAAA,IAAA,KAAA,cACA,KAAA,MAAA,SAAA,WACA,EAAA,MAAA,KAAA,kBAAA,IAEA,KAAA,MAAA,KAAA,EACA,EAAA,KAAA,MAKA,EAAA,GAAA,QAAA,SAAA,GACA,MAAA,MAAA,KAAA,QACA,EAAA,UAAA,GACA,MAEA,KAAA,KAAA,WACA,EAAA,KAAA,MAIA,EAAA,QAAA,QAAA,KAGA,EAAA,QAAA,UAEA,QAAA,0BAEA,MAAA,KACA,WAAA,EAEA,OAAA,EAKA,KACA,QAAA,EACA,OAAA,EACA,MAAA,MACA,IAAA,MACA,KAAA,MACA,UAAA,SACA,MAAA,OAGA,OAAA,QAIA,WACA,MAAA,MACA,IAAA,MACA,KAAA,OAIA,YACA,gBAAA,OACA,QAAA,GACA,OAAA,QAKA,YAAA,UAGA,UACA,MAAA,QACA,IAAA,OACA,KAAA,GACA,MAAA,OACA,OAAA,OACA,QAAA,MACA,QAAA,GACA,OAAA,UACA,MAAA,OACA,gBAAA,OACA,wBAAA,OACA,qBAAA,OACA,gBAAA,QAMA,UAAA,UAAA,KAAA,OAAA,SAAA,MAAA,IAAA,mBAAA,cAGA,aAAA,EAGA,MAAA,IAGA,SAAA,EACA,SAAA,EAIA,kBAAA,EAGA,YAAA,EAIA,iBAAA,EAGA,OAAA,IAGA,QAAA,IAGA,QAAA,EAGA,aAAA,EAIA,YAAA,EAGA,kBAAA,yBAOA,QAAA,KAMA,UAAA,KAIA,eAAA,KAGA,qBAAA,EAGA,cAAA,WAGA,iBAAA,EAKA,IAAA,GAAA,KACA,KA6WA,kBAAA,SAAA,OAAA,KAAA,OAAA,IAAA,OACA,OAAA,WAAA,UAAA,GAEA,EAAA,WAKA,OC5mBA,mBAAA,WASA,QAAA,KACA,KAAA,QAEA,iBAAA,EAEA,iBAAA,GAIA,GAAA,GAAA,EAAA,SAEA,GAAA,KAAA,SAAA,GACA,GAAA,GAAA,IAEA,GAAA,OAAA,IAAA,EACA,EAAA,UAAA,EAAA,aACA,EAAA,UAAA,EAAA,UACA,EAAA,aAAA,EAAA,aACA,EAAA,mBAAA,EAAA,aAAA,KAAA,qBACA,EAAA,kBAAA,EAAA,aAAA,KAAA,aACA,EAAA,UAAA,EAAA,UAAA,KAAA,aACA,EAAA,cAAA,EAAA,UAAA,KAAA,SACA,EAAA,QAAA,EAAA,UAAA,KAAA,YACA,EAAA,eAAA,EAAA,UAAA,KAAA,kBACA,EAAA,mBAAA,EAAA,UAAA,KAAA,sBACA,EAAA,iBAAA,EAAA,mBAAA,KAAA,oBACA,EAAA,mBAAA,EAAA,UAAA,KAAA,sBACA,EAAA,mBAAA,EAAA,mBAAA,KAAA,sBACA,EAAA,oBAAA,EAAA,mBAAA,KAAA,uBACA,EAAA,uBAAA,EAAA,UAAA,KAAA,0BACA,EAAA,eAAA,EAAA,kBACA,EAAA,QAAA,EAAA,QAEA,EAAA,WAAA,EACA,EAAA,SAAA,EAEA,EAAA,YAAA,EAGA,EAAA,OAAA,gBAAA,EAEA,EAAA,OAAA,YAAA,EAEA,EAAA,aAAA,GACA,EAAA,YAGA,EAAA,aAAA,GAGA,EAAA,eAAA,GAGA,EAAA,aAAA,GAGA,OAAA,YAAA,WAEA,EAAA,WAAA,EAEA,OAAA,QAAA,WAEA,EAAA,SAAA,GAGA,OAAA,QAAA,WAEA,EAAA,SAAA,GAGA,OAAA,OAAA,aAKA,OAAA,OAAA,SAAA,GACA,EAAA,SACA,EAAA,SAAA,IAKA,OAAA,WAAA,SAAA,GACA,EAAA,SACA,EAAA,SAAA,IAIA,EAAA,YAAA,EAAA,aAAA,GAEA,EAAA,cACA,EAAA,iBAMA,EAAA,aAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,mBAEA,GAAA,OAAA,WACA,EAAA,GAAA,YACA,EAAA,eAAA,SAAA,eAEA,EAAA,eAAA,YAAA,cACA,EAAA,YAAA,OAAA,OACA,aAAA,EAAA,mBACA,EAAA,UAAA,OACA,EAAA,eAAA,OACA,EAAA,mBAAA,OACA,EAAA,mBAAA,OACA,EAAA,oBAAA,WAyCA,EAAA,eAAA,WAwCA,QAAA,KACA,EAAA,kBAAA,WAAA,WACA,EAAA,YAAA,OAAA,QACA,KA1CA,GAAA,GAAA,IAEA,GAAA,YAAA,EAAA,mBACA,EAAA,mBAAA,EAAA,sBAEA,EAAA,kBAAA,GAAA,aAAA,cAAA,WACA,GAAA,EAAA,eAAA,SAAA,cAAA,CACA,GAAA,GAAA,SAAA,EAAA,MAAA,KAAA,mBACA,IAAA,IAAA,EAAA,kBAAA,CACA,GAAA,GAAA,EAAA,YAAA,EACA,GAAA,YAAA,OAAA,OACA,EAAA,mBAAA,KAAA,EAAA,SACA,EAAA,YAAA,OAAA,QACA,EAAA,kBAAA,EACA,aAAA,EAAA,uBAEA,cAAA,EAAA,mBACA,EAAA,YAAA,OAAA,WAKA,EAAA,kBAAA,GAAA,WAAA,cAAA,GAEA,EAAA,YAAA,IACA,WAAA,WACA,aAAA,EAAA,oBAEA,SAAA,SAAA,GACA,EAAA,YAAA,GAAA,EAAA,gBAAA,EAAA,SAAA,KAAA,EAAA,gBACA,OAGA,KAAA,UAAA,MAAA,WAGA,MAFA,cAAA,EAAA,mBACA,EAAA,YAAA,OAAA,QACA,KAWA,EAAA,aAAA,WACA,GAAA,GAAA,IACA,GAAA,UAAA,GAAA,QAAA,cAAA,WACA,GAAA,GAAA,EAAA,MACA,EAAA,EAAA,UAAA,EAAA,aAEA,IADA,EAAA,UAAA,OACA,EAAA,KAAA,WAAA,EAAA,OAAA,GACA,EAAA,QAAA,EACA,EAAA,eACA,EAAA,eAAA,OACA,WAAA,WACA,EAAA,eAAA,QAAA,OAAA,WACA,aAAA,YAEA,SAEA,QAAA,EAAA,WACA,IAAA,OACA,EAAA,mBAAA,KAAA,MAAA,EAAA,gBAAA,IACA,EAAA,oBAAA,IAAA,SAAA,MAAA,WAKA,MAJA,GAAA,mBAAA,QAAA,OAAA,WACA,aAAA,OAAA,EAAA,gBAAA,IACA,aAAA,YAEA,IAEA,EAAA,mBAAA,MACA,MACA,KAAA,OACA,EAAA,iBAAA,KAAA,EAAA,iBACA,EAAA,mBAAA,MACA,MACA,SACA,EAAA,uBAAA,OACA,WAAA,WACA,EAAA,uBAAA,QAAA,OAAA,WACA,aAAA,gBAMA,EAAA,mBAAA,KAAA,cAAA,MAAA,WACA,EAAA,mBAAA,OACA,EAAA,UAAA,UAKA,EAAA,aAAA,SAAA,GACA,GAAA,GAAA,IAEA,GAAA,QAAA,EAAA,QAAA,SAAA,GAEA,IAAA,GAAA,QAAA,EACA,QAAA,IAAA,yBAEA,EAAA,gBAAA,EACA,EAAA,aAAA,EACA,EAAA,YAAA,EAAA,MAEA,KAAA,WACA,EAAA,kBAAA,KAAA,wCAKA,IAAA,GAAA,EAAA,KAAA,EAAA,qBAAA,SAAA,OACA,GAAA,YAAA,SAAA,EAAA,GACA,GAAA,GAAA,IAEA,IAAA,KAAA,aAAA,GAAA,KAAA,kBAAA,EAAA,CAEA,EAAA,kBAAA,OAEA,IAAA,GAAA,EAAA,UAGA,EAAA,EAAA,eACA,EAAA,EAAA,QAAA,SACA,EAAA,EAAA,QAAA,MACA,EAAA,EAAA,QAAA,MAIA,GAHA,EAAA,QAAA,SAGA,EAAA,iBACA,IAAA,EAAA,CAQA,IAAA,GADA,GANA,EAAA,EAAA,YACA,EAAA,EAAA,QAAA,MACA,EAAA,EAAA,QAAA,MACA,EAAA,EAAA,QAAA,WACA,KACA,EAAA,EAEA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IACA,EAAA,MACA,GAAA,EAAA,GAAA,GACA,GAAA,EAAA,GAAA,GACA,QAAA,EAAA,GAAA,IAGA,MAAA,YAAA,EAIA,GAAA,GAAA,EAAA,eACA,IAAA,EAAA,CACA,GAAA,GAAA,EAAA,QAAA,MACA,EAAA,EAAA,QAAA,MACA,EAAA,EAAA,QAAA,SAEA,GADA,EAAA,QAAA,SACA,EAAA,QAAA,cACA,EAAA,EAAA,WACA,KACA,EAAA,EAAA,cACA,IAAA,EAAA,OAAA,CACA,EAAA,iBAAA,YAAA,UACA,KAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IAAA,CACA,GAAA,GAAA,EAAA,EACA,GAAA,KAAA,EAEA,QAAA,cAAA,EAAA,GACA,QAAA,aAAA,EAAA,IACA,QAAA,eAAA,EAAA,IACA,QAAA,aAAA,EAAA,IACA,QAAA,WAAA,EAAA,KAGA,EAAA,KAAA,EAAA,KAAA,KAAA,GAAA,QAAA,cAAA,WACA,EAAA,WACA,aAAA,OAAA,EAAA,MAAA,KAAA,gBAKA,GAAA,UAAA,GAAA,GAAA,SAAA,WAKA,GAAA,GAAA,EAAA,mBACA,GAAA,SACA,EAAA,KAAA,EAAA,UAEA,EAAA,UAAA,GAAA,GAAA,SAAA,UAIA,IAAA,GAAA,EAAA,cACA,IAAA,EAAA,CAIA,IAAA,GAAA,GAAA,EAHA,EAAA,EAAA,aACA,EAAA,EAAA,UACA,KACA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IAAA,CACA,EAAA,EAAA,GACA,IACA,KAAA,GAAA,GAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IACA,GAAA,YAAA,EAAA,GAAA,CACA,EAAA,EAAA,GACA,EAAA,UACA,KAAA,GAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IAAA,CACA,EAAA,EAAA,GACA,IACA,KAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IACA,EAAA,EAAA,IAAA,EAAA,EAEA,GAAA,QAAA,KAAA,QAGA,GAAA,EAAA,IAAA,EAAA,EAGA,GAAA,GAAA,EAEA,KAAA,UAAA,EACA,KAAA,aAAA,EASA,IAAA,GALA,IADA,EAAA,OACA,GACA,EAAA,yBACA,EAAA,6BACA,EAAA,EAAA,iBAEA,EAAA,EAAA,GAAA,EAAA,OAAA,GAAA,EAAA,IAAA,CACA,GAAA,IAAA,EAAA,GAAA,OACA,GAAA,EAAA,EACA,IAAA,MAAA,GAAA,QAAA,IAAA,MAAA,MAAA,GAOA,KAAA,GANA,IAAA,KACA,IACA,MAAA,EACA,GAAA,EAAA,GAAA,GAAA,GACA,GAAA,EAAA,GAAA,GAAA,GAAA,IAEA,GAAA,EAAA,GAAA,GAAA,KAAA,CACA,GAAA,IAAA,EAAA,GACA,GAAA,EAAA,GAAA,IACA,GAAA,GAAA,GACA,IAAA,EACA,IACA,MAAA,EACA,GAAA,GAAA,GACA,GAAA,GAAA,GAGA,IAAA,IACA,GAAA,KAAA,IAAA,KAAA,IAIA,MAAA,KAAA,WAAA,KAAA,KAAA,eAAA,KAAA,KAAA,WAAA,KAAA,MACA,GAAA,OAAA,qBAAA,EAAA,8CAAA,EAAA,IAAA,KAAA,YACA,IAAA,GAEA,GAAA,GAEA,KACA,GAAA,IAAA,IAGA,GAAA,KAAA,EAAA,QAAA,GAAA,QAAA,GAAA,KAAA,KAAA,IACA,GAAA,KAAA,IAEA,GAAA,SAAA,IACA,EAAA,KAAA,IACA,IAGA,GAAA,EAAA,IAAA,GAAA,KAAA,EAAA,GAAA,KACA,GAAA,GAEA,IACA,GAAA,SAAA,sBACA,GAAA,KAAA,kBAAA,IAGA,GAAA,GAAA,KAAA,EAAA,GAAA,KACA,GAAA,EACA,KAIA,GAAA,SAAA,EAAA,mBAKA,EAAA,cAAA,EAAA,kBAAA,KAAA,SAIA,EAAA,kBAAA,EAEA,EAAA,OAAA,cAAA,EAEA,EAAA,sBACA,EAAA,qBAAA,EAAA,iBAMA,EAAA,UAAA,WACA,GAAA,GAAA,IAEA,GAAA,mBAAA,GAAA,SAAA,WACA,EAAA,mBAGA,EAAA,mBAAA,GAAA,QAAA,QAAA,SAAA,GAGA,GAFA,EAAA,kBAEA,EAAA,WAAA,EAAA,OAAA,eAAA,CACA,GAAA,GAAA,EAAA,KAEA,cAAA,OAAA,EAAA,KAAA,WAMA,EAAA,SAAA,SAAA,GACA,GACA,GADA,EAAA,IAKA,IAHA,EAAA,YAAA,EAGA,EAAA,iBAAA,CAIA,IAAA,GAHA,GAAA,EAAA,cACA,EAAA,EAAA,OAEA,EAAA,EAAA,EAAA,EAAA,IAAA,CACA,GAAA,GAAA,EAAA,EAEA,IAAA,EAAA,KAAA,OAAA,GAAA,EAAA,KAAA,OAAA,GACA,EAAA,OAAA,kBAAA,EAAA,CAEA,GAAA,GAAA,EAAA,OAAA,MACA,EAAA,EAAA,KAAA,QAEA,IAAA,EAAA,OAAA,kBACA,EAAA,aAAA,KAAA,SAAA,EAAA,OAAA,kBAAA,SAAA,gBAGA,EAAA,OAAA,kBAAA,IACA,EAAA,aAAA,KAAA,SAAA,EAAA,OAAA,kBAAA,YAAA,gBACA,EAAA,OAAA,iBAAA,EACA,EAAA,SAAA,iBAGA,EAAA,aAAA,KAAA,SAAA,EAAA,OAAA,kBAAA,YAAA,gBACA,EAAA,OAAA,iBAAA,EACA,EAAA,SAAA,gBAEA,EAAA,WAAA,IAOA,YACA,EAAA,EAAA,UAAA,EAAA,cACA,EAAA,eAAA,SAAA,eAAA,GAAA,EAAA,KAAA,IAAA,EAAA,QACA,EAAA,aAAA,KAOA,IAAA,GAAA,EAAA,KAAA,EAAA,cAAA,SAAA,OAsEA,OArEA,GAAA,aAAA,SAAA,GACA,GAAA,GAAA,EAAA,QACA,IAEA,cAAA,eACA,KAAA,QAEA,KAAA,cAAA,KAAA,EAAA,SACA,KAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IACA,EAAA,KAAA,EACA,QAAA,aAAA,EAAA,GAAA,OACA,QAAA,mBAAA,EAAA,GAAA,aAGA,MAAA,QAAA,KAAA,EAAA,KAAA,KACA,KAAA,UAAA,QAIA,EAAA,WAAA,SAAA,GACA,GAAA,GAAA,IAEA,GAAA,OAAA,eAAA,EAAA,OAAA,YACA,EAAA,mBAAA,UAAA,EAAA,WAAA,IAAA,KAKA,EAAA,eAAA,WACA,GAAA,GAAA,IAEA,GAAA,OAAA,cAAA,EACA,aAAA,EAAA,OAAA,aACA,EAAA,OAAA,YAAA,OAAA,WAAA,WACA,EAAA,OAAA,cAAA,GACA,MAIA,EAAA,MAAA,WACA,aAAA,WAIA,EAAA,OAAA,WACA,aAAA,OAAA,IAIA,EAAA,eAAA,WACA,MAAA,MAAA,aAIA,EAAA,oBAAA,WACA,MAAA,MAAA,OAAA,mBAeA,OAAA,EAEA,KAAA,SAAA,EAAA,GAIA,GAHA,gBAAA,KACA,EAAA,SAAA,eAAA,IAEA,EAAA,CACA,GAAA,GAAA,SAAA,cAAA,SACA,GAAA,OAAA,EACA,EAAA,IAAA,gDACA,EAAA,YAAA,QCzmBA,OAAA,KAAA,OAAA,SAEA,OAAA,QAAA,UAAA,WAEA,QAAA,KACA,KAAA,UACA,KAAA,OAAA,KACA,KAAA,KAAA,KAywCA,QAAA,GAAA,GACA,MAAA,gBAAA,GACA,EAAA,UAAA,GAEA,EAIA,QAAA,GAAA,EAAA,GACA,EAAA,EAAA,OACA,gBAAA,QAAA,kBAAA,EAAA,yBAhxCA,GAAA,GAAA,EAAA,SAmxCA,OAhxCA,GAAA,KAAA,SAAA,GACA,GAAA,GAAA,IACA,GAAA,OAAA,IAAA,EAGA,EAAA,UAAA,EAAA,UAEA,EAAA,UAAA,KAGA,EAAA,OAAA,EAAA,aAAA,GAAA,QAAA,cAAA,EAAA,SACA,EAAA,UAAA,EAAA,OAAA,KAAA,iBAGA,EAAA,aAAA,EAAA,OAAA,KAAA,qBAGA,EAAA,gBAAA,EAAA,OAAA,KAAA,aAGA,EAAA,YAAA,EAAA,UAAA,KAAA,uBAEA,EAAA,cAAA,EAAA,YAAA,KAAA,yBAGA,EAAA,OAAA,WAAA,EAAA,WAEA,EAAA,OAAA,YAAA,EAAA,YAGA,EAAA,eAEA,EAAA,oBAEA,EAAA,iBAEA,EAAA,eAEA,EAAA,UAEA,EAAA,mBAEA,EAAA,kBAIA,EAAA,aAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,MAEA,GAAA,OAAA,KAAA,qBAAA,SAAA,iBAGA,EAAA,UAAA,EAAA,sFAAA,SAAA,EAAA,WAEA,EAAA,iBAAA,EAGA,EAAA,QAAA,EAAA,gFAAA,SAAA,EAAA,WAEA,EAAA,eAAA,EAGA,EAAA,OAAA,aAAA,EAAA,UAAA,QACA,EAAA,OAAA,cAAA,EAAA,UAAA,QAGA,IAAA,IACA,wCACA,sBACA,oGACA,sHACA,SACA,wBAIA,oCACA,uCACA,4DACA,0DACA,uDACA,SACA,mGACA,8BACA,SACA,wBACA,0DACA,SACA,UACA,KAAA,GAEA,GAAA,gBAAA,EAAA,GAAA,SAAA,EAAA,QAGA,EAAA,aAAA,EAAA,gBAAA,KAAA,cAGA,EAAA,gBAAA,GAAA,QAAA,WAAA,SAAA,GACA,EAAA,iBAEA,EAAA,YAAA,EAAA,cAAA,EAAA,eAGA,EAAA,gBAAA,GAAA,aAAA,oCAAA,SAAA,GACA,eAAA,IAAA,KAAA,OAAA,SAAA,SAAA,KAAA,OAAA,gBACA,EAAA,EAAA,EAAA,IAAA,MAAA,MAAA,EAAA,IAAA,MAAA,QAIA,EAAA,gBAAA,GAAA,QAAA,SAAA,SAAA,GACA,EAAA,iBAEA,EAAA,WAIA,IAAA,IACA,mDACA,oBACA,8DACA,gDACA,0CACA,SACA,wDACA,8CACA,0CACA,SACA,gDACA,SACA,UACA,KAAA,IAGA,EAAA,EAAA,YAEA,GAAA,KAAA,EAAA,GAAA,SAAA,EAAA,QACA,EAAA,IAAA,EAAA,KAAA,KAAA,QACA,EAAA,SAAA,EAAA,IAAA,QAEA,EAAA,MAAA,EAAA,KAAA,KAAA,iBAEA,EAAA,SAAA,EAAA,MAAA,KAAA,OAEA,EAAA,aAAA,EAEA,EAAA,OAAA,EAAA,MAAA,KAAA,SACA,EAAA,OAAA,MAAA,WACA,EAAA,MAAA,SAAA,YAEA,EAAA,OAAA,KAAA,EAAA,OAAA,KAAA,QAGA,EAAA,IAAA,EAAA,KAAA,KAAA,eAEA,EAAA,OAAA,EAAA,IAAA,KAAA,OAEA,EAAA,WAAA,EAEA,EAAA,OAAA,EAAA,IAAA,KAAA,SACA,EAAA,OAAA,MAAA,WACA,EAAA,MAAA,SAAA,YAEA,EAAA,OAAA,KAAA,EAAA,OAAA,KAAA,QAGA,EAAA,SAAA,EAAA,MAAA,QAEA,EAAA,UAAA,EAAA,KAAA,KAAA,gBAGA,IAAA,GAAA,WACA,EAAA,OAAA,aAAA,EAAA,YACA,EAAA,UACA,EAAA,aAAA,IAAA,QAAA,IAGA,GAAA,aAAA,GAAA,QAAA,IAIA,EAAA,QAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,MAEA,GAAA,OAAA,KAAA,qBAAA,YAAA,sBAEA,EAAA,gBAAA,SAAA,WAEA,WAAA,WACA,EAAA,gBAAA,UACA,KACA,EAAA,UAAA,SACA,EAAA,QAAA,SACA,EAAA,YAAA,SAAA,UACA,EAAA,cAAA,GAAA,IAAA,GAEA,EAAA,UAAA,KAAA,SAIA,EAAA,aAAA,GAAA,EAAA,aAAA,SAAA,gBACA,EAAA,gBAAA,KAAA,kBAAA,YAAA,iBACA,EAAA,gBAAA,KAAA,kBAAA,YAAA,iBACA,EAAA,gBAAA,KAAA,mBAAA,YAAA,kBAEA,EAAA,UAAA,IAAA,aAAA,IAAA,aAGA,EAAA,OAAA,OAAA,gBAAA,EAEA,EAAA,aAEA,EAAA,WAAA,GAIA,EAAA,SAAA,WACA,GAAA,GAAA,IAEA,GAAA,iBACA,EAAA,eAAA,EAAA,UAAA,QACA,EAAA,gBAAA,EAAA,UAAA,WAKA,EAAA,kBAAA,WAuCA,QAAA,GAAA,GAGA,GAFA,EAAA,oBAAA,EAEA,EAAA,kBAAA,CACA,EAAA,mBAAA,EAEA,EAAA,EAAA,MAAA,EAAA,SAAA,KACA,EAAA,EAAA,MAAA,EAAA,SAAA,GAEA,IAAA,GAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,EAEA,EAAA,GACA,EAAA,EAAA,eAAA,GACA,EAAA,GACA,EAAA,EAAA,gBAAA,EAGA,GAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,EAAA,EAGA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,EAAA,EAEA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,EAAA,EAGA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,EAAA,GAGA,EAAA,GAAA,GAAA,GAAA,EAAA,KACA,EAAA,EACA,EAAA,EACA,EAAA,EAEA,EAAA,EACA,EAAA,EACA,EAAA,GAGA,EAAA,EACA,EAAA,EAAA,EAAA,aACA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,cACA,EAAA,EAEA,EAAA,EAAA,IACA,EAAA,GAGA,EAAA,EAAA,EAAA,eACA,EAAA,EAAA,EAAA,cAIA,EAAA,oBACA,EAAA,UAAA,KACA,IAAA,EACA,KAAA,IAGA,EAAA,QAAA,KACA,IAAA,EACA,KAAA,IAIA,EAAA,aACA,IAAA,EACA,KAAA,EAAA,EAAA,aACA,MAAA,EACA,OAAA,EAAA,EAAA,gBAGA,EAAA,iBACA,OAAA,QACA,SAAA,EACA,OAAA,IAGA,EAAA,cACA,EAAA,gBACA,EAAA,gBACA,OAAA,UAAA,EAAA,cACA,OAAA,QAAA,EAAA,YAIA,EAAA,IAAA,UAAA,GArIA,GAAA,GAAA,KACA,EAAA,EAAA,OACA,EAAA,EAAA,UACA,EAAA,EAAA,QACA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,CAEA,GAAA,UAAA,SAAA,GACA,EAAA,WACA,EAAA,aAAA,EAGA,EAAA,iBAAA,EAAA,gBACA,EAAA,oBAAA,EACA,EAAA,EAAA,MAAA,EAAA,SAAA,KACA,EAAA,EAAA,MAAA,EAAA,SAAA,IAEA,EAAA,QAAA,MAIA,EAAA,UAAA,SAAA,GAEA,GADA,EAAA,aAAA,GACA,EAAA,kBAAA,EAAA,eACA,EAAA,mBAAA,CACA,GAAA,GAAA,EAAA,MAAA,EAAA,SAAA,KACA,EAAA,EAAA,MAAA,EAAA,SAAA,IACA,EAAA,IAEA,KAAA,IAAA,EAAA,GAAA,GAAA,KAAA,IAAA,EAAA,GAAA,KACA,EAAA,mBAAA,OA2GA,EAAA,eAAA,WACA,GAAA,GAAA,KAGA,GAFA,EAAA,OAEA,EAAA,WAEA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,CAEA,GAAA,MAAA,SAAA,GACA,EAAA,oBAGA,EAAA,UAAA,SAAA,GACA,GAAA,GAAA,EAAA,WACA,OAAA,QACA,EAAA,EAAA,MACA,EAAA,EAAA,OAGA,GAAA,EAAA,IACA,EAAA,EAAA,KACA,EAAA,EAAA,SACA,EAAA,EAAA,UACA,EAAA,EAAA,YAGA,EAAA,QAAA,UAAA,SAAA,GACA,EAAA,iBACA,EAAA,WACA,OAAA,QACA,QAAA,EACA,SAAA,EACA,SAAA,EACA,UAAA,EACA,EAAA,EAAA,MACA,EAAA,EAAA,MACA,UAAA,OAOA,EAAA,aAAA,WACA,GAAA,GAAA,KAGA,GAFA,EAAA,OAEA,EAAA,SAEA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,CAEA,GAAA,MAAA,SAAA,GACA,EAAA,oBAGA,EAAA,UAAA,SAAA,GACA,GAAA,GAAA,EAAA,WACA,OAAA,MACA,EAAA,EAAA,MACA,EAAA,EAAA,OAGA,GAAA,EAAA,SACA,EAAA,EAAA,UACA,EAAA,EAAA,IACA,EAAA,EAAA,KACA,EAAA,EAAA,YAGA,EAAA,QAAA,UAAA,SAAA,GACA,EAAA,eACA,EAAA,WACA,OAAA,MACA,QAAA,EACA,SAAA,EACA,SAAA,EACA,UAAA,EACA,EAAA,EAAA,MACA,EAAA,EAAA,MACA,UAAA,OAOA,EAAA,UAAA,SAAA,GACA,GAAA,GAAA,IAEA,GAAA,WAGA,EAAA,mBAGA,IAAA,GAAA,KAEA,EAAA,IAsBA,OApBA,GAAA,QAAA,SAAA,uBACA,EAAA,aAAA,SAAA,uBAEA,SAAA,EAAA,SACA,EAAA,WAAA,EAAA,EAAA,UACA,EAAA,EAAA,QACA,EAAA,iBAAA,GAGA,OAAA,EAAA,SACA,EAAA,WAAA,EAAA,EAAA,QACA,EAAA,EAAA,UACA,EAAA,eAAA,GAIA,EAAA,OAAA,UAAA,EAAA,EAEA,EAAA,OAAA,UAAA,EAAA,GAGA,IAAA,EAAA,WAAA,IACA,KAAA,EAAA,WAAA,KACA,SAAA,EAAA,WAAA,IACA,UAAA,EAAA,WAAA,KACA,UAAA,EAAA,aAAA,cAKA,EAAA,UAAA,SAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,OAGA,EAAA,KAEA,EAAA,KAEA,EAAA,GAAA,EAAA,aACA,EAAA,EACA,EAAA,EACA,EAAA,EAEA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,CAEA,GAAA,SAGA,IAAA,GAAA,EAAA,SAAA,EAAA,EAAA,EAAA,YAAA,EAAA,aAAA,YAAA,EAAA,WACA,EAAA,EAAA,UAAA,EAAA,EAAA,EAAA,UAEA,UAAA,EAAA,SACA,EAAA,EAAA,UACA,EAAA,EAAA,QAGA,EAAA,GACA,EAAA,EAAA,eAAA,EAAA,aAAA,GACA,EAAA,EAAA,SAEA,EAAA,KAAA,MAAA,EAAA,EAAA,YAAA,EAAA,WAAA,GACA,EAAA,EAAA,UAAA,EAAA,cAAA,EAAA,EAAA,EAAA,gBACA,EAAA,EAAA,EAAA,eAEA,EAAA,IACA,EAAA,GAEA,EAAA,IACA,EAAA,GAGA,GAAA,EAAA,UAAA,EAAA,EAAA,UAAA,EAAA,eACA,EAAA,EAAA,UAAA,EAAA,cAEA,EAAA,IACA,EAAA,GAEA,EAAA,IACA,EAAA,GAIA,EAAA,EACA,EAAA,EAAA,EAAA,aACA,EAAA,EAAA,UACA,EAAA,EAAA,SAAA,EAAA,cAEA,EAAA,iBACA,OAAA,QACA,SAAA,EACA,OAAA,EAAA,YAIA,OAAA,EAAA,SACA,EAAA,EAAA,QACA,EAAA,EAAA,UAEA,EAAA,EAAA,SACA,EAAA,EAAA,gBAAA,EAAA,cAAA,GACA,EAAA,EAAA,eAAA,GAEA,EAAA,KAAA,MAAA,EAAA,EAAA,YAAA,EAAA,WAAA,GACA,EAAA,EAAA,UAAA,EAAA,cAAA,EAAA,EAAA,EAAA,gBACA,EAAA,EAAA,EAAA,eAEA,EAAA,IACA,EAAA,GAEA,EAAA,IACA,EAAA,GAGA,GAAA,EAAA,UAAA,EAAA,EAAA,UAAA,EAAA,eACA,EAAA,EAAA,UAAA,EAAA,cAEA,EAAA,IACA,EAAA,GAEA,EAAA,IACA,EAAA,GAIA,EAAA,EAAA,SACA,EAAA,EAAA,UAAA,EAAA,aACA,EAAA,EACA,EAAA,EAAA,EAAA,cAEA,EAAA,iBACA,OAAA,MACA,SAAA,EAAA,SACA,OAAA,KAIA,EAAA,KAAA,KAAA,EAAA,IAAA,IAGA,EAAA,aACA,IAAA,EACA,KAAA,EACA,MAAA,EACA,OAAA,IAGA,EAAA,cACA,EAAA,iBAIA,EAAA,QAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,OACA,EAAA,EAAA,OAEA,GAAA,QAAA,YACA,EAAA,iBAAA,EAAA,eAAA,EAAA,UAAA,aAAA,EAAA,UAAA,aAEA,EAAA,kBACA,EAAA,iBAAA,GAGA,EAAA,gBACA,EAAA,eAAA,GAGA,EAAA,UAAA,cACA,EAAA,UAAA,aAAA,GAGA,EAAA,UAAA,YACA,EAAA,UAAA,WAAA,GAIA,EAAA,YAAA,uBACA,EAAA,aAAA,YAAA,uBACA,EAAA,UAEA,EAAA,gBAEA,OAAA,UAAA,EAAA,cACA,OAAA,QAAA,EAAA,gBAOA,EAAA,gBAAA,SAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,OACA,EAAA,EAAA,UACA,EAAA,EAAA,MACA,EAAA,EAAA,IAEA,EAAA,EAAA,gBAAA,EAAA,WAEA,GAAA,EAAA,SACA,EAAA,EAAA,UAAA,EAAA,SAAA,IAAA,EAAA,EAAA,QACA,GAAA,EAAA,EAAA,EAAA,EAEA,EAAA,KAAA,KAAA,GAEA,IAAA,GAAA,EAAA,SACA,EAAA,EAAA,UAAA,EAAA,OAAA,IAAA,CACA,GAAA,EAAA,EAAA,EAAA,EACA,EAAA,KAAA,KAAA,IAEA,EAAA,eAAA,EAAA,EAAA,SAAA,EAAA,EAAA,EAAA,WAKA,EAAA,iBAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,OAEA,EAAA,EAAA,UAAA,SAEA,EAAA,EACA,EAAA,CAEA,GAAA,MAAA,WACA,EAAA,aAAA,UAAA,EAAA,UAAA,WAAA,IAAA,EAAA,EAAA,cAGA,EAAA,UAAA,SAAA,GACA,GAAA,GAAA,EAAA,iBACA,OAAA,QACA,EAAA,EAAA,OAGA,GAAA,EAAA,KACA,EAAA,EAAA,YAGA,EAAA,QAAA,UAAA,SAAA,GACA,EAAA,UAAA,aACA,EAAA,iBACA,OAAA,QACA,SAAA,EACA,UAAA,EACA,EAAA,EAAA,WAOA,EAAA,eAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,OAEA,EAAA,EAAA,UAAA,OACA,EAAA,EACA,EAAA,CAEA,GAAA,MAAA,WACA,EAAA,aAAA,UAAA,EAAA,QAAA,WAAA,IAAA,EAAA,EAAA,cAGA,EAAA,UAAA,SAAA,GACA,GAAA,GAAA,EAAA,iBACA,OAAA,MACA,EAAA,EAAA,OAGA,GAAA,EAAA,UACA,EAAA,EAAA,OAGA,EAAA,QAAA,UAAA,SAAA,GACA,EAAA,UAAA,WACA,EAAA,iBACA,OAAA,MACA,SAAA,EACA,UAAA,EACA,EAAA,EAAA,WAOA,EAAA,gBAAA,SAAA,GACA,GAAA,GAAA,KAEA,GADA,EAAA,OACA,EAAA,UAEA,GAAA,WAGA,EAAA,mBAGA,IAAA,GAAA,KAEA,EAAA,IAoBA,OAlBA,GAAA,QAAA,SAAA,uBACA,EAAA,aAAA,SAAA,uBAEA,SAAA,EAAA,SACA,EAAA,EAAA,MACA,EAAA,EAAA,IACA,EAAA,aAAA,GAGA,OAAA,EAAA,SACA,EAAA,EAAA,IACA,EAAA,EAAA,MACA,EAAA,WAAA,GAIA,EAAA,OAAA,UAAA,EAAA,GAGA,KAAA,EAAA,WAAA,KACA,UAAA,EAAA,WAAA,OAKA,EAAA,gBAAA,SAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,OACA,EAAA,EAAA,UAGA,EAAA,KAEA,GAAA,EAAA,SACA,EAAA,EAAA,SAEA,EAAA,EAAA,UAAA,EAAA,EAAA,EAAA,UAEA,IAAA,SAAA,EAAA,OAAA,CACA,EAAA,EAAA,KAEA,IAAA,GAAA,EAAA,UAAA,EAAA,QAEA,GAAA,IACA,EAAA,GAEA,EAAA,IACA,EAAA,GAGA,EAAA,eAAA,EAAA,EAAA,SAAA,EAAA,UAAA,GACA,EAAA,iBACA,OAAA,QACA,UAAA,EACA,QAAA,EAAA,gBAGA,IAAA,OAAA,EAAA,OAAA,CACA,EAAA,EAAA,GAEA,IAAA,GAAA,EAAA,UAAA,EAAA,QACA,GAAA,IACA,EAAA,GAEA,EAAA,IACA,EAAA,GAGA,EAAA,eAAA,EAAA,UAAA,EAAA,SAAA,EAAA,EAAA,WACA,EAAA,iBACA,OAAA,MACA,UAAA,EAAA,UACA,QAAA,IAIA,EAAA,KAAA,KAAA,IAEA,EAAA,cACA,EAAA,iBAIA,EAAA,eAAA,SAAA,EAAA,GACA,GAAA,GAAA,IAEA,GAAA,UAAA,UAAA,KAAA,KAAA,EAAA,MAAA,KAIA,EAAA,gBAAA,SAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,OACA,EAAA,EAAA,UAEA,EAAA,EAAA,gBAAA,EAAA,WAKA,GAFA,EAAA,gBAAA,EAAA,cAAA,GAEA,IAAA,EAAA,UAAA,EAAA,UAAA,EAAA,UAAA,GAEA,GAAA,KAAA,MAAA,EAAA,EAAA,YAAA,EAAA,WAAA,EAEA,IAAA,GAAA,GAAA,EAAA,aAEA,EAAA,GAAA,EAAA,QAAA,EAAA,UAAA,EAEA,GAAA,KAAA,MAAA,EAAA,EAAA,YAAA,EAAA,WAAA,EAEA,IAAA,GAAA,EAAA,eAAA,EAEA,GAAA,UAAA,KAAA,IAAA,EAAA,KAAA,IACA,EAAA,QAAA,KAAA,IAAA,EAAA,KAAA,IAEA,EAAA,aACA,IAAA,EACA,KAAA,EAAA,EAAA,aACA,MAAA,EACA,OAAA,EAAA,EAAA,gBAGA,SAAA,EAAA,OACA,EAAA,aAAA,UAAA,EAAA,EAAA,EAAA,YACA,OAAA,EAAA,QACA,EAAA,aAAA,UAAA,EAAA,EAAA,EAAA,aAKA,EAAA,cAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,OACA,EAAA,EAAA,SAEA,SAAA,EAAA,eACA,EAAA,OAAA,KAAA,KAAA,EAAA,YAAA,EAAA,gBACA,EAAA,OAAA,KAAA,KAAA,EAAA,YAAA,EAAA,cAEA,EAAA,OAAA,YAAA,UACA,EAAA,OAAA,YAAA,YAEA,EAAA,OAAA,SAAA,UACA,EAAA,OAAA,SAAA,YAMA,EAAA,QAAA,WACA,GAAA,GAAA,IAEA,GAAA,OACA,EAAA,KAAA,EAAA,+DAAA,SAAA,EAAA,WAIA,EAAA,QAAA,WACA,GAAA,GAAA,IAEA,GAAA,OACA,EAAA,KAAA,SACA,EAAA,KAAA,OAKA,EAAA,kBAAA,WACA,OAAA,aACA,OAAA,eAAA,kBAEA,SAAA,UAAA,SAKA,EAAA,YAAA,SAAA,GAGA,EAAA,KAAA,MAAA,EACA,IAAA,GAAA,KAAA,MAAA,EAAA,IACA,EAAA,EAAA,GAAA,CACA,OAAA,GAAA,KAAA,EAAA,KAGA,EAAA,gBAAA,SAAA,EAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,MAEA,IAAA,EAGA,CACA,EAAA,OAAA,EAEA,EAAA,OAAA,OAAA,gBAAA,EAEA,EAAA,iBAEA,EAAA,aAAA,CAEA,KAAA,GADA,GAAA,EAAA,aAAA,OACA,EAAA,EAAA,EAAA,EAAA,IAAA,CACA,GAAA,GAAA,EAAA,aAAA,GAAA,EACA,GAAA,KAAA,MAAA,EAAA,WAAA,KAAA,KAAA,MAAA,EAAA,WAAA,KAIA,EAAA,UADA,QAAA,EAAA,YACA,EAEA,EAAA,iBAnBA,OAAA,qBACA,EAAA,WAyBA,EAAA,UAAA,SAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,MAEA,GAAA,UAEA,IAAA,GAAA,EAAA,aAAA,GAAA,GACA,EAAA,KACA,EAAA,EAAA,aAAA,OACA,EAAA,EAAA,EAAA,CAGA,GAAA,EAAA,aAAA,GADA,GAAA,EACA,EAAA,EAEA,EAAA,EAEA,IAAA,GAAA,WAAA,EAAA,KAAA,QACA,EAAA,WAAA,EAAA,KAAA,QACA,EAAA,GAAA,EAAA,aACA,EAAA,EAAA,QAAA,EAEA,GAAA,UAAA,KAAA,IAAA,EAAA,KAAA,IAAA,YAAA,UACA,EAAA,QAAA,KAAA,IAAA,EAAA,KAAA,IAAA,YAAA,UAGA,EAAA,aACA,IAAA,EACA,KAAA,EAAA,EAAA,aACA,MAAA,EACA,OAAA,EAAA,EAAA,gBAGA,EAAA,cACA,EAAA,gBAEA,EAAA,iBACA,OAAA,QACA,SAAA,EACA,OAAA,IAEA,EAAA,gBAEA,OAAA,UAAA,EAAA,cACA,OAAA,QAAA,EAAA,YACA,EAAA,eAAA,EAAA,cAAA,EAAA,aAEA,EAAA,aAAA,UAAA,EAAA,UAAA,WAAA,IAAA,EAAA,EAAA;EAIA,EAAA,eAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,MAEA,KACA,EAAA,OAAA,YAAA,IAKA,EAAA,WAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,MAEA,KACA,EAAA,OAAA,YAAA,IAKA,EAAA,YAAA,SAAA,GAUA,IAAA,GATA,GAAA,KAEA,GADA,EAAA,OACA,MACA,EAAA,KACA,EAAA,GACA,EAAA,KACA,EAAA,KAEA,EAAA,EAAA,aAAA,OACA,EAAA,EAAA,EAAA,EAAA,IAAA,CACA,GAAA,GAAA,EAAA,aAAA,GAAA,GACA,EAAA,WAAA,EAAA,KAAA,OAOA,IANA,EAAA,EAEA,EAAA,YAAA,iBACA,EAAA,KAAA,SAAA,YAAA,iBACA,EAAA,KAAA,UAAA,YAAA,kBAEA,EAAA,KAAA,GAAA,EAAA,IAAA,EAAA,EAAA,SAAA,CACA,EAAA,SAAA,gBAKA,KAAA,GAHA,GAAA,EAAA,KAAA,SACA,EAAA,EAAA,OAEA,EAAA,EAAA,EAAA,EAAA,IAAA,CACA,GAAA,GAAA,EAAA,GAAA,GACA,EAAA,EAAA,WAAA,IACA,EAAA,EAAA,WAAA,IAGA,GAAA,KAAA,GAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,MAAA,GAAA,EAAA,KAAA,EAAA,EAAA,UACA,EAAA,EACA,EAAA,GAGA,MAAA,IACA,EAAA,SAAA,iBACA,EAAA,KAAA,UAAA,SAAA,mBAIA,OAIA,IAAA,EAAA,WAAA,EAAA,KAAA,UAAA,EAAA,EAAA,IAKA,GAJA,EAAA,EAAA,aAAA,GAAA,GACA,EAAA,WAAA,EAAA,KAAA,QAGA,EAAA,OAAA,GAAA,EAAA,QAAA,EAAA,EAAA,SAMA,GALA,EAAA,EACA,EAAA,EAAA,KAAA,SACA,EAAA,EAAA,OAGA,WAAA,EAAA,KAAA,WAAA,WAAA,EAAA,KAAA,WACA,GAAA,MAAA,EACA,IAAA,EAAA,EAAA,EAAA,EAAA,IACA,EAAA,EAAA,GAAA,GACA,EAAA,EAAA,WAAA,IACA,EAAA,EAAA,WAAA,KAEA,EAAA,OAAA,GAAA,EAAA,QAAA,EAAA,EAAA,UAAA,EAAA,OAAA,GAAA,EAAA,MAAA,EAAA,EAAA,UACA,EAAA,GAGA,MAAA,IACA,EAAA,YAAA,iBACA,EAAA,KAAA,UAAA,YAAA,uBAOA,KAAA,EAAA,EAAA,EAAA,EAAA,IACA,EAAA,EAAA,GAAA,GACA,EAAA,EAAA,WAAA,IACA,EAAA,EAAA,WAAA,KACA,EAAA,SAAA,iBACA,EAAA,KAAA,UAAA,SAAA,kBAEA,EAAA,OAAA,GAAA,EAAA,QAAA,EAAA,EAAA,UAAA,EAAA,OAAA,GAAA,EAAA,MAAA,EAAA,EAAA,UACA,EAAA,GAGA,MAAA,IACA,EAAA,YAAA,iBACA,EAAA,KAAA,UAAA,YAAA,uBAIA,IAAA,WAAA,EAAA,KAAA,YACA,MAAA,GACA,EAAA,SAAA,iBACA,EAAA,KAAA,SAAA,SAAA,iBACA,EAAA,KAAA,UAAA,SAAA,oBAEA,EAAA,YAAA,iBACA,EAAA,KAAA,SAAA,YAAA,iBACA,EAAA,KAAA,UAAA,YAAA,qBAOA,EAAA,cAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,OAEA,EAAA,EAAA,cAAA,MAEA,IAAA,EAAA,EAAA,CACA,GAAA,GAAA,EAAA,cAAA,GAAA,GACA,EAAA,EAAA,WAAA,KAAA,EAAA,aACA,EAAA,EAAA,WAAA,IAEA,EAAA,EAAA,cAAA,GAAA,EAAA,GACA,EAAA,EAAA,WAAA,KAAA,EAAA,QACA,EAAA,EAAA,WAAA,GAEA,GAAA,UAAA,KAAA,KAAA,EAAA,IAAA,IACA,EAAA,QAAA,KAAA,KAAA,EAAA,IAAA,IAEA,EAAA,iBACA,OAAA,QACA,SAAA,EACA,OAAA,MAMA,EAAA,YAAA,WACA,GAAA,GAAA,KACA,EAAA,EAAA,MAEA,GAAA,cAAA,EAAA,aAAA,KAAA,iBACA,IAAA,GAAA,EAAA,cAAA,MACA,GAAA,cAAA,EAAA,cAAA,GAAA,GAAA,KAAA,MACA,EAAA,YAAA,EAAA,cAAA,GAAA,EAAA,GAAA,KAAA,MAEA,EAAA,gBAAA,KAAA,MAAA,EAAA,aAAA,KAAA,MAAA,EAAA,iBAIA,EAAA,gBAAA,SAAA,GACA,GAAA,GAAA,IAEA,GAAA,aAAA,KAAA,EAAA,YAAA,KAIA,EAAA,eAAA,SAAA,EAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,OAGA,EAAA,yCAAA,KAAA,OAAA,OAAA,OAAA,EAAA,OAAA,CACA,GAAA,IAAA,KACA,SAAA,GACA,EAAA,EAAA,GAEA,GAAA,EAAA,QACA,EAAA,SAAA,KAAA,OAAA,SAAA,SAAA,EAAA,gBACA,KAAA,OAAA,cAAA,EAAA,cACA,KAAA,OAAA,gBAAA,EAAA,iBAIA,MAAA,EAAA,WAEA,KAAA,eAMA,EAAA,YAAA,SAAA,EAAA,GACA,CAAA,GAAA,GAAA,IACA,GAAA,OAGA,EAAA,QACA,EAAA,OAAA,QAGA,QAAA,IAAA,EAAA,eACA,EAAA,cAAA,GAAA,IAAA,EAEA,IAAA,GAAA,gBAAA,KAAA,OAAA,WAAA,OAAA,EAAA,OAAA,CAGA,GAAA,YAAA,YAAA,UACA,EAAA,cAAA,GAAA,IAAA,IAmCA,UAAA,KAQA,SC3yCA,UAAA,WACA,SAAA,kBAAA,WACA,SAAA,UAAA,gBAAA,QAAA,SAAA,EAAA,EAAA,GAwUA,QAAA,KACA,OAAA,aACA,OAAA,eAAA,kBAEA,SAAA,UAAA,QAIA,QAAA,GAAA,EAAA,GACA,EAAA,EAAA,OACA,gBAAA,QAAA,kBAAA,EAAA,yBAMA,QAAA,KAuBA,MAtBA,GAAA,MACA,IAAA,sBACA,SAAA,OACA,QAAA,SAAA,GACA,GAAA,GAAA,EAAA,QACA,SAAA,KAAA,aACA,CACA,GAAA,IAAA,IAAA,EAAA,KAAA,QAAA,CACA,GAAA,GAAA,EACA,KAAA,EAAA,EAAA,IAAA,EAAA,IACA,GAAA,kBAAA,EAAA,KAAA,GAAA,GAAA,KAAA,EAAA,KAAA,GAAA,MAAA,WAGA,GAAA,gBAAA,QAAA,OAAA,GAEA,EAAA,KAAA,QAAA,KAAA,KAAA,QAAA,gBAGA,MAAA,WACA,MAAA,kBAGA,EA4CA,QAAA,KACA,EAAA,MACA,IAAA,2BACA,KAAA,OACA,KAAA,eAAA,EAAA,gBAAA,MAAA,UAAA,EAAA,UAAA,MAAA,gBAAA,EAAA,gBAAA,MAAA,SAAA,KAAA,OAAA,cACA,QAAA,SAAA,GAGA,MADA,GAAA,KAAA,MAAA,GACA,IAAA,EAAA,QACA,EAAA,SAAA,OAAA,IAAA,QAAA,IAAA,QAAA,IAAA,QAAA,yCACA,GACA,IAAA,EAAA,QACA,EAAA,SAAA,OAAA,IAAA,QAAA,IAAA,QAAA,IAAA,QAAA,yCACA,IAEA,EAAA,SAAA,OAAA,IAAA,QAAA,IAAA,QAAA,IAAA,QAAA,qCACA,EAAA,KAAA,QAAA,sBACA,IAGA,MAAA,WACA,EAAA,SAAA,OAAA,IAAA,QAAA,IAAA,QAAA,IAAA,QAAA,8CA9aA,GAAA,GAAA,EAAA,iBACA,EAAA,EAAA,oBACA,EAAA,EAAA,KAAA,yBACA,EAAA,EAAA,sBACA,EAAA,EAAA,MAEA,QAAA,KAAA,OAAA,SACA,KAAA,OAAA,KAAA,WAGA,KAAA,OAAA,WADA,aAAA,EAAA,UACA,mCAAA,EAAA,YAAA,OAAA,EAAA,UAAA,OAAA,EAAA,QAAA,aAAA,EAAA,SAAA,uBAEA,wBAAA,EAAA,KAAA,aAAA,EAAA,SAAA,uBAEA,KAAA,OAAA,WAAA,EAAA,KACA,KAAA,OAAA,OAAA,EAAA,OACA,KAAA,OAAA,SAAA,OAAA,SAAA,OACA,KAAA,OAAA,OAAA,EAAA,OACA,KAAA,OAAA,QAAA,EAAA,KACA,KAAA,OAAA,WAAA,IAEA,OAAA,gBACA,IAAA,OAAA,SAAA,KACA,MAAA,EAAA,SAAA,OACA,QAAA,mEACA,IAAA,OAAA,SAAA,OAAA,OAAA,EAAA,KACA,UAAA,EACA,UAAA,EAIA,IAAA,GAAA,EAAA,UACA,EAAA,EAAA,eACA,GAAA,MAAA,WACA,GAAA,GAAA,EAAA,MAAA,MACA,EAAA,EAAA,KAMA,OALA,GAAA,SAAA,aACA,EAAA,YAAA,WACA,EAAA,SAAA,WACA,EAAA,OAAA,GAAA,GAAA,SAEA,GAIA,IAAA,GAAA,EAAA,oBACA,GAAA,iBAAA,MAAA,WAEA,MADA,GAAA,YAAA,aACA,IAGA,EAAA,KAAA,eAAA,WAgCA,QAAA,GAAA,EAAA,GAEA,EAAA,CAEA,IAAA,GAAA,EAAA,KAAA,WAQA,IAPA,EAAA,KAAA,WACA,GAAA,GAAA,EAAA,KACA,GAAA,WAAA,YAAA,GACA,EAAA,WAEA,EAAA,QAEA,IAAA,EACA,EAAA,KAAA,QACA,CAGA,GAFA,IAEA,OAAA,KAEA,OAAA,CACA,GAAA,GAAA,OAAA,KAAA,EAEA,KAAA,EACA,KAEA,IAAA,GAAA,OAAA,eAEA,EAAA,EAAA,WAAA,GAAA,eAAA,WACA,EAAA,EAAA,WAAA,GAAA,aAAA,UAEA,IAAA,EAAA,GAAA,SAAA,SAAA,EAAA,GAAA,SAAA,QAAA,CAKA,IAFA,GAAA,GAAA,EAAA,GACA,EAAA,EACA,MAAA,GAAA,GAAA,GACA,EAAA,EAAA,IAAA,GACA,EAAA,EAAA,WAEA,GAAA,EAAA,IAAA,GACA,EAAA,QAAA,mCAEA,IAEA,GACA,KAAA,EAAA,GACA,KAAA,EACA,UAAA,EACA,YAAA,SAGA,IAAA,SAAA,KAAA,gBAIA,IAFA,GAAA,GAAA,SAAA,KAAA,kBAEA,EAAA,SAAA,IAAA,CACA,GAAA,GAAA,EAAA,EAAA,gBACA,GAAA,SAAA,SACA,EAAA,QAAA,mCAGA,EAAA,UAAA,GAEA,IAEA,GACA,KAAA,EACA,KAAA,EACA,UAAA,EACA,YAAA,IAKA,EAAA,UAAA,GACA,EAAA,QAAA,UAAA,GAEA,IAEA,eAAA,GAEA,EAAA,KADA,GAAA,EACA,SACA,GAAA,EACA,YAEA,MAAA,EAAA,UAOA,QAAA,GAAA,GACA,GAAA,GAAA,WAAA,EAAA,KAAA,QAAA,SAAA,GAAA,GAAA,WAAA,KACA,EAAA,EAAA,4BAAA,SAAA,EAAA,KACA,GAAA,GAAA,EAAA,EAAA,YAAA,SAAA,CACA,IAAA,GAAA,EAAA,EAAA,EAAA,SACA,GAAA,IAAA,OAAA,GAAA,KAAA,MAAA,GAhIA,aAAA,OACA,OAAA,MACA,SAAA,EAAA,YACA,MAAA,EAAA,MACA,KAAA,WACA,KAAA,SACA,WAAA,IACA,UAAA,KAKA,IAAA,GAAA,EAAA,oBACA,EAAA,EAAA,KAAA,UACA,EAAA,EAAA,aACA,EAAA,EAAA,KAAA,qBACA,EAAA,EAAA,KAAA,iBACA,EAAA,EACA,EAAA,EACA,EAAA,EAAA,mCAAA,SAAA,GAEA,EAAA,EAAA,KAAA,gBACA,EAAA,EAAA,OAGA,GAAA,OAAA,SAAA,GACA,EAAA,iBAEA,EAAA,EAAA,KAAA,EAAA,OAAA,iBAwGA,EAAA,GAAA,QAAA,MAAA,SAAA,GACA,EAAA,iBAEA,IAAA,GAAA,EAAA,MAAA,KAAA,MACA,GAAA,UAAA,IAGA,IAAA,GAAA,OAAA,GAAA,GAAA,GAAA,OACA,EAAA,EAAA,iBAEA,EAAA,IAEA,GAAA,MACA,UAAA,EACA,aAAA,EACA,QAAA,KAAA,OAAA,WACA,IAAA,OAEA,qBAAA,SAAA,GACA,EAAA,CAGA,IAAA,GAAA,sBAAA,KAAA,SAAA,SAAA,OACA,OAAA,GACA,EAAA,mBAAA,EAAA,GAAA,QAAA,MAAA,MAAA,gBAiBA,IAAA,GAAA,eACA,EAAA,eAAA,KACA,gBAAA,MAAA,SAGA,IAAA,GAAA,EAAA,eACA,GAAA,GAAA,aAAA,oCAAA,SAAA,GACA,eAAA,EACA,EAAA,EAAA,IAIA,IAAA,GAAA,EAAA,kBACA,GAAA,KACA,gBACA,IAAA,EAAA,IACA,MAAA,EAAA,MACA,QAAA,EAAA,QACA,IAAA,EAAA,IACA,UAAA,EACA,UAAA,GAGA,EAAA,MAAA,SAAA,GACA,EAAA,iBAEA,GAEA,KACA,EAAA,OACA,IAAA,GAAA,EAAA,sBAEA,EAAA,GAAA,GAAA,SACA,GAAA,MACA,UAAA,EAAA,0BACA,WAAA,GACA,YAAA,EACA,OAAA,MAAA,GACA,QAAA,IAEA,EAAA,gBAAA,EAAA,GACA,MAAA,OAwBA,IAAA,GAAA,gBACA,GAAA,YAAA,MAAA,SAAA,GACA,EAAA,gBACA,IAAA,GAAA,EAAA,MACA,EAAA,EAAA,KAEA,IACA,EAAA,KAAA,cAAA,SAAA,KAAA,OAAA,QAAA,YAAA,KAAA,OAAA,YACA,SAAA,GAEA,GAAA,EAAA,OACA,EAAA,SAAA,GACA,EAAA,YAAA,GAEA,EAAA,SAAA,GAGA,MAAA,EAAA,UAEA,QAAA,KAAA,WACA,MAAA,iDA0DA,EAAA,cAAA,MAAA,GAEA,EAAA,0BAAA,MAAA,WAEA,MADA,GAAA,QACA,IAGA,EAAA,oBAAA,MAAA,WAEA,GAAA,aAAA,EAAA,UAAA,CAEA,GAAA,GAAA,OAAA,UACA,EAAA,OAAA,QACA,EAAA,0CAAA,EAAA,OAAA,OAAA,EAAA,OAAA,CACA,GAAA,MACA,KAAA,MACA,IAAA,EACA,OAAA,EACA,SAAA,OACA,QAAA,SAAA,GAEA,MAAA,IAAA,EAAA,QAOA,MAAA,EAAA,UACA,IAPA,KAAA,OAAA,SAAA,KAAA,OAAA,SAAA,aAAA,EAAA,cACA,KAAA,OAAA,cAAA,EAAA,cACA,IAFA,eAYA,MAAA,OAAA,cAAA,EAAA,KACA,GAGA,QAAA,IA6BA,EAAA,MAAA,WAGA,MAFA,GAAA,YAAA,UACA,EAAA,SAAA,WACA,IAGA,EAAA,0BAAA,MAAA,WAEA,MADA,GAAA,KAAA,QAAA,sBACA,IAGA,EAAA,2BAAA,MAAA,WAEA,MADA,GAAA,KAAA,QAAA,sBACA,IAGA,EAAA,6BAAA,MAAA,WA2BA,MA1BA,GAAA,MACA,IAAA,eACA,KAAA,OACA,KAAA,EAAA,gBAAA,YACA,WAAA,aAGA,QAAA,SAAA,GAGA,MAFA,SAAA,IAAA,GACA,EAAA,KAAA,MAAA,GACA,IAAA,EAAA,QAAA,IAAA,EAAA,WACA,GAAA,SAAA,OAAA,IAAA,QAAA,IAAA,QAAA,IAAA,QAAA,0BAAA,EAAA,QAAA,UAGA,EAAA,SAAA,OAAA,IAAA,QAAA,IAAA,QAAA,IAAA,QAAA,oCACA,EAAA,gBAAA,OAAA,kBAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,MAAA,aACA,EAAA,KAAA,QAAA,kBACA,GAAA,KAAA,QAAA,uBAEA,SAAA,aAGA,MAAA,WACA,EAAA,SAAA,OAAA,IAAA,QAAA,IAAA,QAAA,IAAA,QAAA,+CAGA,IAGA,EAAA,4BAAA,MAAA,WAEA,MADA,GAAA,KAAA,QAAA,sBACA,GAIA,IAAA,GAAA,EAAA,QACA,GAAA,MAAA,WACA,GAAA,GAAA,EAAA,OACA,EAAA,EAAA,MACA,EAAA,EAAA,YACA,EAAA,EAAA,SAoDA,OAnDA,GAAA,SAAA,SAyBA,EAAA,MACA,IAAA,mBACA,KAAA,OACA,SAAA,OACA,MACA,OAAA,KAEA,KAAA,SAAA,GACA,GAAA,EACA,GAAA,GAAA,EAAA,OAAA,CACA,GAAA,GAAA,EAAA,SAAA,YAAA,SAAA,KAAA,cACA,GAAA,KAAA,SAAA,EAAA,KAAA,EAAA,SAAA,OACA,IAAA,EAAA,QACA,EAAA,SACA,WAAA,WACA,EAAA,WACA,MACA,IAAA,EAAA,SACA,EAAA,SACA,WAAA,WACA,EAAA,WACA,QA7CA,EAAA,KACA,iBACA,SAAA,GACA,SAAA,GACA,GAAA,GAAA,EAAA,OAAA,CACA,GAAA,GAAA,EAAA,SAAA,SAAA,SAAA,SAAA,QAAA,MACA,KACA,EAAA,SAAA,SAAA,SAAA,SAAA,QAAA,KAAA,OAEA,IAAA,EAAA,QACA,EAAA,SACA,WAAA,WACA,EAAA,WACA,MACA,IAAA,EAAA,SACA,EAAA,SACA,WAAA,WACA,EAAA,WACA,OAGA,SA6BA,IAEA,EAAA,UAAA,MAAA,WACA,EAAA,iBAAA,eA0FA,OAAA,OAAA","sourcesContent":["define('config',[],function(){\r\n  requirejs.config({\r\n    paths: {\r\n      infrastructure: 'infrastructure',\r\n      jquery: 'lib/jquery-1.11.1',\r\n      blockui: 'lib/jquery.blockUI',\r\n      artdialog: 'lib/artdialog',\r\n      sewise: 'lib/sewise',\r\n      sewisecontrol: 'sewisecontrol',\r\n      subtitle: 'subtitle',\r\n      clip: 'clip',\r\n      subtitleselect: 'subtitleselect',\r\n      comment: 'comment'\r\n    },\r\n    shim: {\r\n      blockui: {\r\n        deps: ['infrastructure']\r\n      },\r\n      artdialog: {\r\n        deps: ['infrastructure']\r\n      }\r\n      /*subtitle: {\r\n        deps: ['sewise']\r\n      },\r\n      clip: {\r\n        deps: ['sewise']\r\n      }*/\r\n    }\r\n  });\r\n});\n","/*!\r\n * jQuery blockUI plugin\r\n * Version 2.66.0-2013.10.09\r\n * Requires jQuery v1.7 or later\r\n *\r\n * Examples at: http://malsup.com/jquery/block/\r\n * Copyright (c) 2007-2013 M. Alsup\r\n * Dual licensed under the MIT and GPL licenses:\r\n * http://www.opensource.org/licenses/mit-license.php\r\n * http://www.gnu.org/licenses/gpl.html\r\n *\r\n * Thanks to Amir-Hossein Sobhi for some excellent contributions!\r\n */\r\n\r\n;(function() {\r\n/*jshint eqeqeq:false curly:false latedef:false */\r\n\"use strict\";\r\n\r\n\tfunction setup($) {\r\n\t\t$.fn._fadeIn = $.fn.fadeIn;\r\n\r\n\t\tvar noOp = $.noop || function() {};\r\n\r\n\t\t// this bit is to ensure we don't call setExpression when we shouldn't (with extra muscle to handle\r\n\t\t// confusing userAgent strings on Vista)\r\n\t\tvar msie = /MSIE/.test(navigator.userAgent);\r\n\t\tvar ie6  = /MSIE 6.0/.test(navigator.userAgent) && ! /MSIE 8.0/.test(navigator.userAgent);\r\n\t\tvar mode = document.documentMode || 0;\r\n\t\tvar setExpr = $.isFunction( document.createElement('div').style.setExpression );\r\n\r\n\t\t// global $ methods for blocking/unblocking the entire page\r\n\t\t$.blockUI   = function(opts) { install(window, opts); };\r\n\t\t$.unblockUI = function(opts) { remove(window, opts); };\r\n\r\n\t\t// convenience method for quick growl-like notifications  (http://www.google.com/search?q=growl)\r\n\t\t$.growlUI = function(title, message, timeout, onClose) {\r\n\t\t\tvar $m = $('<div class=\"growlUI\"></div>');\r\n\t\t\tif (title) $m.append('<h1>'+title+'</h1>');\r\n\t\t\tif (message) $m.append('<h2>'+message+'</h2>');\r\n\t\t\tif (timeout === undefined) timeout = 3000;\r\n\r\n\t\t\t// Added by konapun: Set timeout to 30 seconds if this growl is moused over, like normal toast notifications\r\n\t\t\tvar callBlock = function(opts) {\r\n\t\t\t\topts = opts || {};\r\n\r\n\t\t\t\t$.blockUI({\r\n\t\t\t\t\tmessage: $m,\r\n\t\t\t\t\tfadeIn : typeof opts.fadeIn  !== 'undefined' ? opts.fadeIn  : 700,\r\n\t\t\t\t\tfadeOut: typeof opts.fadeOut !== 'undefined' ? opts.fadeOut : 1000,\r\n\t\t\t\t\ttimeout: typeof opts.timeout !== 'undefined' ? opts.timeout : timeout,\r\n\t\t\t\t\tcenterY: false,\r\n\t\t\t\t\tshowOverlay: false,\r\n\t\t\t\t\tonUnblock: onClose,\r\n\t\t\t\t\tcss: $.blockUI.defaults.growlCSS\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tcallBlock();\r\n\t\t\tvar nonmousedOpacity = $m.css('opacity');\r\n\t\t\t$m.mouseover(function() {\r\n\t\t\t\tcallBlock({\r\n\t\t\t\t\tfadeIn: 0,\r\n\t\t\t\t\ttimeout: 30000\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar displayBlock = $('.blockMsg');\r\n\t\t\t\tdisplayBlock.stop(); // cancel fadeout if it has started\r\n\t\t\t\tdisplayBlock.fadeTo(300, 1); // make it easier to read the message by removing transparency\r\n\t\t\t}).mouseout(function() {\r\n\t\t\t\t$('.blockMsg').fadeOut(1000);\r\n\t\t\t});\r\n\t\t\t// End konapun additions\r\n\t\t};\r\n\r\n\t\t// plugin method for blocking element content\r\n\t\t$.fn.block = function(opts) {\r\n\t\t\tif ( this[0] === window ) {\r\n\t\t\t\t$.blockUI( opts );\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\tvar fullOpts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar $el = $(this);\r\n\t\t\t\tif (fullOpts.ignoreIfBlocked && $el.data('blockUI.isBlocked'))\r\n\t\t\t\t\treturn;\r\n\t\t\t\t$el.unblock({ fadeOut: 0 });\r\n\t\t\t});\r\n\r\n\t\t\treturn this.each(function() {\r\n\t\t\t\tif ($.css(this,'position') == 'static') {\r\n\t\t\t\t\tthis.style.position = 'relative';\r\n\t\t\t\t\t$(this).data('blockUI.static', true);\r\n\t\t\t\t}\r\n\t\t\t\tthis.style.zoom = 1; // force 'hasLayout' in ie\r\n\t\t\t\tinstall(this, opts);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// plugin method for unblocking element content\r\n\t\t$.fn.unblock = function(opts) {\r\n\t\t\tif ( this[0] === window ) {\r\n\t\t\t\t$.unblockUI( opts );\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\treturn this.each(function() {\r\n\t\t\t\tremove(this, opts);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t$.blockUI.version = 2.66; // 2nd generation blocking at no extra cost!\r\n\r\n\t\t// override these in your code to change the default behavior and style\r\n\t\t$.blockUI.defaults = {\r\n\t\t\t// message displayed when blocking (use null for no message)\r\n\t\t\tmessage:  '<h1>Please wait...</h1>',\r\n\r\n\t\t\ttitle: null,\t\t// title string; only used when theme == true\r\n\t\t\tdraggable: true,\t// only used when theme == true (requires jquery-ui.js to be loaded)\r\n\r\n\t\t\ttheme: false, // set to true to use with jQuery UI themes\r\n\r\n\t\t\t// styles for the message when blocking; if you wish to disable\r\n\t\t\t// these and use an external stylesheet then do this in your code:\r\n\t\t\t// $.blockUI.defaults.css = {};\r\n\t\t\tcss: {\r\n\t\t\t\tpadding:\t0,\r\n\t\t\t\tmargin:\t\t0,\r\n\t\t\t\twidth:\t\t'30%',\r\n\t\t\t\ttop:\t\t'40%',\r\n\t\t\t\tleft:\t\t'35%',\r\n\t\t\t\ttextAlign:\t'center',\r\n\t\t\t\tcolor:\t\t'#000',\r\n\t\t\t\t//border:\t\t'none',\r\n\t\t\t\t//backgroundColor:'#151719',\r\n\t\t\t\tcursor:\t\t'wait'\r\n\t\t\t},\r\n\r\n\t\t\t// minimal style set used when themes are used\r\n\t\t\tthemedCSS: {\r\n\t\t\t\twidth:\t'30%',\r\n\t\t\t\ttop:\t'40%',\r\n\t\t\t\tleft:\t'35%'\r\n\t\t\t},\r\n\r\n\t\t\t// styles for the overlay\r\n\t\t\toverlayCSS:  {\r\n\t\t\t\tbackgroundColor:\t'#000',\r\n\t\t\t\topacity:\t\t\t0.6,\r\n\t\t\t\tcursor:\t\t\t\t'wait'\r\n\t\t\t},\r\n\r\n\t\t\t// style to replace wait cursor before unblocking to correct issue\r\n\t\t\t// of lingering wait cursor\r\n\t\t\tcursorReset: 'default',\r\n\r\n\t\t\t// styles applied when using $.growlUI\r\n\t\t\tgrowlCSS: {\r\n\t\t\t\twidth:\t\t'350px',\r\n\t\t\t\ttop:\t\t'10px',\r\n\t\t\t\tleft:\t\t'',\r\n\t\t\t\tright:\t\t'10px',\r\n\t\t\t\tborder:\t\t'none',\r\n\t\t\t\tpadding:\t'5px',\r\n\t\t\t\topacity:\t0.6,\r\n\t\t\t\tcursor:\t\t'default',\r\n\t\t\t\tcolor:\t\t'#fff',\r\n\t\t\t\tbackgroundColor: '#000',\r\n\t\t\t\t'-webkit-border-radius':'10px',\r\n\t\t\t\t'-moz-border-radius':\t'10px',\r\n\t\t\t\t'border-radius':\t\t'10px'\r\n\t\t\t},\r\n\r\n\t\t\t// IE issues: 'about:blank' fails on HTTPS and javascript:false is s-l-o-w\r\n\t\t\t// (hat tip to Jorge H. N. de Vasconcelos)\r\n\t\t\t/*jshint scripturl:true */\r\n\t\t\tiframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank',\r\n\r\n\t\t\t// force usage of iframe in non-IE browsers (handy for blocking applets)\r\n\t\t\tforceIframe: false,\r\n\r\n\t\t\t// z-index for the blocking overlay\r\n\t\t\tbaseZ: 1000,\r\n\r\n\t\t\t// set these to true to have the message automatically centered\r\n\t\t\tcenterX: true, // <-- only effects element blocking (page block controlled via css above)\r\n\t\t\tcenterY: true,\r\n\r\n\t\t\t// allow body element to be stetched in ie6; this makes blocking look better\r\n\t\t\t// on \"short\" pages.  disable if you wish to prevent changes to the body height\r\n\t\t\tallowBodyStretch: true,\r\n\r\n\t\t\t// enable if you want key and mouse events to be disabled for content that is blocked\r\n\t\t\tbindEvents: true,\r\n\r\n\t\t\t// be default blockUI will supress tab navigation from leaving blocking content\r\n\t\t\t// (if bindEvents is true)\r\n\t\t\tconstrainTabKey: true,\r\n\r\n\t\t\t// fadeIn time in millis; set to 0 to disable fadeIn on block\r\n\t\t\tfadeIn:  200,\r\n\r\n\t\t\t// fadeOut time in millis; set to 0 to disable fadeOut on unblock\r\n\t\t\tfadeOut:  400,\r\n\r\n\t\t\t// time in millis to wait before auto-unblocking; set to 0 to disable auto-unblock\r\n\t\t\ttimeout: 0,\r\n\r\n\t\t\t// disable if you don't want to show the overlay\r\n\t\t\tshowOverlay: true,\r\n\r\n\t\t\t// if true, focus will be placed in the first available input field when\r\n\t\t\t// page blocking\r\n\t\t\tfocusInput: true,\r\n\r\n            // elements that can receive focus\r\n            focusableElements: ':input:enabled:visible',\r\n\r\n\t\t\t// suppresses the use of overlay styles on FF/Linux (due to performance issues with opacity)\r\n\t\t\t// no longer needed in 2012\r\n\t\t\t// applyPlatformOpacityRules: true,\r\n\r\n\t\t\t// callback method invoked when fadeIn has completed and blocking message is visible\r\n\t\t\tonBlock: null,\r\n\r\n\t\t\t// callback method invoked when unblocking has completed; the callback is\r\n\t\t\t// passed the element that has been unblocked (which is the window object for page\r\n\t\t\t// blocks) and the options that were passed to the unblock call:\r\n\t\t\t//\tonUnblock(element, options)\r\n\t\t\tonUnblock: null,\r\n\r\n\t\t\t// callback method invoked when the overlay area is clicked.\r\n\t\t\t// setting this will turn the cursor to a pointer, otherwise cursor defined in overlayCss will be used.\r\n\t\t\tonOverlayClick: null,\r\n\r\n\t\t\t// don't ask; if you really must know: http://groups.google.com/group/jquery-en/browse_thread/thread/36640a8730503595/2f6a79a77a78e493#2f6a79a77a78e493\r\n\t\t\tquirksmodeOffsetHack: 4,\r\n\r\n\t\t\t// class name of the message block\r\n\t\t\tblockMsgClass: 'blockMsg',\r\n\r\n\t\t\t// if it is already blocked, then ignore it (don't unblock and reblock)\r\n\t\t\tignoreIfBlocked: false\r\n\t\t};\r\n\r\n\t\t// private data and functions follow...\r\n\r\n\t\tvar pageBlock = null;\r\n\t\tvar pageBlockEls = [];\r\n\r\n\t\tfunction install(el, opts) {\r\n\t\t\tvar css, themedCSS;\r\n\t\t\tvar full = (el == window);\r\n\t\t\tvar msg = (opts && opts.message !== undefined ? opts.message : undefined);\r\n\t\t\topts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\r\n\t\t\tif (opts.ignoreIfBlocked && $(el).data('blockUI.isBlocked'))\r\n\t\t\t\treturn;\r\n\r\n\t\t\topts.overlayCSS = $.extend({}, $.blockUI.defaults.overlayCSS, opts.overlayCSS || {});\r\n\t\t\tcss = $.extend({}, $.blockUI.defaults.css, opts.css || {});\r\n\t\t\tif (opts.onOverlayClick)\r\n\t\t\t\topts.overlayCSS.cursor = 'pointer';\r\n\r\n\t\t\tthemedCSS = $.extend({}, $.blockUI.defaults.themedCSS, opts.themedCSS || {});\r\n\t\t\tmsg = msg === undefined ? opts.message : msg;\r\n\r\n\t\t\t// remove the current block (if there is one)\r\n\t\t\tif (full && pageBlock)\r\n\t\t\t\tremove(window, {fadeOut:0});\r\n\r\n\t\t\t// if an existing element is being used as the blocking content then we capture\r\n\t\t\t// its current place in the DOM (and current display style) so we can restore\r\n\t\t\t// it when we unblock\r\n\t\t\tif (msg && typeof msg != 'string' && (msg.parentNode || msg.jquery)) {\r\n\t\t\t\tvar node = msg.jquery ? msg[0] : msg;\r\n\t\t\t\tvar data = {};\r\n\t\t\t\t$(el).data('blockUI.history', data);\r\n\t\t\t\tdata.el = node;\r\n\t\t\t\tdata.parent = node.parentNode;\r\n\t\t\t\tdata.display = node.style.display;\r\n\t\t\t\tdata.position = node.style.position;\r\n\t\t\t\tif (data.parent)\r\n\t\t\t\t\tdata.parent.removeChild(node);\r\n\t\t\t}\r\n\r\n\t\t\t$(el).data('blockUI.onUnblock', opts.onUnblock);\r\n\t\t\tvar z = opts.baseZ;\r\n\r\n\t\t\t// blockUI uses 3 layers for blocking, for simplicity they are all used on every platform;\r\n\t\t\t// layer1 is the iframe layer which is used to supress bleed through of underlying content\r\n\t\t\t// layer2 is the overlay layer which has opacity and a wait cursor (by default)\r\n\t\t\t// layer3 is the message content that is displayed while blocking\r\n\t\t\tvar lyr1, lyr2, lyr3, s;\r\n\t\t\tif (msie || opts.forceIframe)\r\n\t\t\t\tlyr1 = $('<iframe class=\"blockUI\" style=\"z-index:'+ (z++) +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0\" src=\"'+opts.iframeSrc+'\"></iframe>');\r\n\t\t\telse\r\n\t\t\t\tlyr1 = $('<div class=\"blockUI\" style=\"display:none\"></div>');\r\n\r\n\t\t\tif (opts.theme)\r\n\t\t\t\tlyr2 = $('<div class=\"blockUI blockOverlay ui-widget-overlay\" style=\"z-index:'+ (z++) +';display:none\"></div>');\r\n\t\t\telse\r\n\t\t\t\tlyr2 = $('<div class=\"blockUI blockOverlay\" style=\"z-index:'+ (z++) +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0\"></div>');\r\n\r\n\t\t\tif (opts.theme && full) {\r\n\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all\" style=\"z-index:'+(z+10)+';display:none;position:fixed\">';\r\n\t\t\t\tif ( opts.title ) {\r\n\t\t\t\t\ts += '<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">'+(opts.title || '&nbsp;')+'</div>';\r\n\t\t\t\t}\r\n\t\t\t\ts += '<div class=\"ui-widget-content ui-dialog-content\"></div>';\r\n\t\t\t\ts += '</div>';\r\n\t\t\t}\r\n\t\t\telse if (opts.theme) {\r\n\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all\" style=\"z-index:'+(z+10)+';display:none;position:absolute\">';\r\n\t\t\t\tif ( opts.title ) {\r\n\t\t\t\t\ts += '<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">'+(opts.title || '&nbsp;')+'</div>';\r\n\t\t\t\t}\r\n\t\t\t\ts += '<div class=\"ui-widget-content ui-dialog-content\"></div>';\r\n\t\t\t\ts += '</div>';\r\n\t\t\t}\r\n\t\t\telse if (full) {\r\n\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockPage\" style=\"z-index:'+(z+10)+';display:none;position:fixed\"></div>';\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockElement\" style=\"z-index:'+(z+10)+';display:none;position:absolute\"></div>';\r\n\t\t\t}\r\n\t\t\tlyr3 = $(s);\r\n\r\n\t\t\t// if we have a message, style it\r\n\t\t\tif (msg) {\r\n\t\t\t\tif (opts.theme) {\r\n\t\t\t\t\tlyr3.css(themedCSS);\r\n\t\t\t\t\tlyr3.addClass('ui-widget-content');\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tlyr3.css(css);\r\n\t\t\t}\r\n\r\n\t\t\t// style the overlay\r\n\t\t\tif (!opts.theme /*&& (!opts.applyPlatformOpacityRules)*/)\r\n\t\t\t\tlyr2.css(opts.overlayCSS);\r\n\t\t\tlyr2.css('position', full ? 'fixed' : 'absolute');\r\n\r\n\t\t\t// make iframe layer transparent in IE\r\n\t\t\tif (msie || opts.forceIframe)\r\n\t\t\t\tlyr1.css('opacity',0.0);\r\n\r\n\t\t\t//$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full ? 'body' : el);\r\n\t\t\tvar layers = [lyr1,lyr2,lyr3], $par = full ? $('body') : $(el);\r\n\t\t\t$.each(layers, function() {\r\n\t\t\t\tthis.appendTo($par);\r\n\t\t\t});\r\n\r\n\t\t\tif (opts.theme && opts.draggable && $.fn.draggable) {\r\n\t\t\t\tlyr3.draggable({\r\n\t\t\t\t\thandle: '.ui-dialog-titlebar',\r\n\t\t\t\t\tcancel: 'li'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// ie7 must use absolute positioning in quirks mode and to account for activex issues (when scrolling)\r\n\t\t\tvar expr = setExpr && (!$.support.boxModel || $('object,embed', full ? null : el).length > 0);\r\n\t\t\tif (ie6 || expr) {\r\n\t\t\t\t// give body 100% height\r\n\t\t\t\tif (full && opts.allowBodyStretch && $.support.boxModel)\r\n\t\t\t\t\t$('html,body').css('height','100%');\r\n\r\n\t\t\t\t// fix ie6 issue when blocked element has a border width\r\n\t\t\t\tif ((ie6 || !$.support.boxModel) && !full) {\r\n\t\t\t\t\tvar t = sz(el,'borderTopWidth'), l = sz(el,'borderLeftWidth');\r\n\t\t\t\t\tvar fixT = t ? '(0 - '+t+')' : 0;\r\n\t\t\t\t\tvar fixL = l ? '(0 - '+l+')' : 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// simulate fixed position\r\n\t\t\t\t$.each(layers, function(i,o) {\r\n\t\t\t\t\tvar s = o[0].style;\r\n\t\t\t\t\ts.position = 'absolute';\r\n\t\t\t\t\tif (i < 2) {\r\n\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\ts.setExpression('height','Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:'+opts.quirksmodeOffsetHack+') + \"px\"');\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ts.setExpression('height','this.parentNode.offsetHeight + \"px\"');\r\n\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\ts.setExpression('width','jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + \"px\"');\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ts.setExpression('width','this.parentNode.offsetWidth + \"px\"');\r\n\t\t\t\t\t\tif (fixL) s.setExpression('left', fixL);\r\n\t\t\t\t\t\tif (fixT) s.setExpression('top', fixT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (opts.centerY) {\r\n\t\t\t\t\t\tif (full) s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + \"px\"');\r\n\t\t\t\t\t\ts.marginTop = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (!opts.centerY && full) {\r\n\t\t\t\t\t\tvar top = (opts.css && opts.css.top) ? parseInt(opts.css.top, 10) : 0;\r\n\t\t\t\t\t\tvar expression = '((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + '+top+') + \"px\"';\r\n\t\t\t\t\t\ts.setExpression('top',expression);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// show the message\r\n\t\t\tif (msg) {\r\n\t\t\t\tif (opts.theme)\r\n\t\t\t\t\tlyr3.find('.ui-widget-content').append(msg);\r\n\t\t\t\telse\r\n\t\t\t\t\tlyr3.append(msg);\r\n\t\t\t\tif (msg.jquery || msg.nodeType)\r\n\t\t\t\t\t$(msg).show();\r\n\t\t\t}\r\n\r\n\t\t\tif ((msie || opts.forceIframe) && opts.showOverlay)\r\n\t\t\t\tlyr1.show(); // opacity is zero\r\n\t\t\tif (opts.fadeIn) {\r\n\t\t\t\tvar cb = opts.onBlock ? opts.onBlock : noOp;\r\n\t\t\t\tvar cb1 = (opts.showOverlay && !msg) ? cb : noOp;\r\n\t\t\t\tvar cb2 = msg ? cb : noOp;\r\n\t\t\t\tif (opts.showOverlay)\r\n\t\t\t\t\tlyr2._fadeIn(opts.fadeIn, cb1);\r\n\t\t\t\tif (msg)\r\n\t\t\t\t\tlyr3._fadeIn(opts.fadeIn, cb2);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (opts.showOverlay)\r\n\t\t\t\t\tlyr2.show();\r\n\t\t\t\tif (msg)\r\n\t\t\t\t\tlyr3.show();\r\n\t\t\t\tif (opts.onBlock)\r\n\t\t\t\t\topts.onBlock();\r\n\t\t\t}\r\n\r\n\t\t\t// bind key and mouse events\r\n\t\t\tbind(1, el, opts);\r\n\r\n\t\t\tif (full) {\r\n\t\t\t\tpageBlock = lyr3[0];\r\n\t\t\t\tpageBlockEls = $(opts.focusableElements,pageBlock);\r\n\t\t\t\tif (opts.focusInput)\r\n\t\t\t\t\tsetTimeout(focus, 20);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tcenter(lyr3[0], opts.centerX, opts.centerY);\r\n\r\n\t\t\tif (opts.timeout) {\r\n\t\t\t\t// auto-unblock\r\n\t\t\t\tvar to = setTimeout(function() {\r\n\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t$.unblockUI(opts);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\t$(el).unblock(opts);\r\n\t\t\t\t}, opts.timeout);\r\n\t\t\t\t$(el).data('blockUI.timeout', to);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// remove the block\r\n\t\tfunction remove(el, opts) {\r\n\t\t\tvar count;\r\n\t\t\tvar full = (el == window);\r\n\t\t\tvar $el = $(el);\r\n\t\t\tvar data = $el.data('blockUI.history');\r\n\t\t\tvar to = $el.data('blockUI.timeout');\r\n\t\t\tif (to) {\r\n\t\t\t\tclearTimeout(to);\r\n\t\t\t\t$el.removeData('blockUI.timeout');\r\n\t\t\t}\r\n\t\t\topts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\t\t\tbind(0, el, opts); // unbind events\r\n\r\n\t\t\tif (opts.onUnblock === null) {\r\n\t\t\t\topts.onUnblock = $el.data('blockUI.onUnblock');\r\n\t\t\t\t$el.removeData('blockUI.onUnblock');\r\n\t\t\t}\r\n\r\n\t\t\tvar els;\r\n\t\t\tif (full) // crazy selector to handle odd field errors in ie6/7\r\n\t\t\t\tels = $('body').children().filter('.blockUI').add('body > .blockUI');\r\n\t\t\telse\r\n\t\t\t\tels = $el.find('>.blockUI');\r\n\r\n\t\t\t// fix cursor issue\r\n\t\t\tif ( opts.cursorReset ) {\r\n\t\t\t\tif ( els.length > 1 )\r\n\t\t\t\t\tels[1].style.cursor = opts.cursorReset;\r\n\t\t\t\tif ( els.length > 2 )\r\n\t\t\t\t\tels[2].style.cursor = opts.cursorReset;\r\n\t\t\t}\r\n\r\n\t\t\tif (full)\r\n\t\t\t\tpageBlock = pageBlockEls = null;\r\n\r\n\t\t\tif (opts.fadeOut) {\r\n\t\t\t\tcount = els.length;\r\n\t\t\t\tels.stop().fadeOut(opts.fadeOut, function() {\r\n\t\t\t\t\tif ( --count === 0)\r\n\t\t\t\t\t\treset(els,data,opts,el);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treset(els, data, opts, el);\r\n\t\t}\r\n\r\n\t\t// move blocking element back into the DOM where it started\r\n\t\tfunction reset(els,data,opts,el) {\r\n\t\t\tvar $el = $(el);\r\n\t\t\tif ( $el.data('blockUI.isBlocked') )\r\n\t\t\t\treturn;\r\n\r\n\t\t\tels.each(function(i,o) {\r\n\t\t\t\t// remove via DOM calls so we don't lose event handlers\r\n\t\t\t\tif (this.parentNode)\r\n\t\t\t\t\tthis.parentNode.removeChild(this);\r\n\t\t\t});\r\n\r\n\t\t\tif (data && data.el) {\r\n\t\t\t\tdata.el.style.display = data.display;\r\n\t\t\t\tdata.el.style.position = data.position;\r\n\t\t\t\tif (data.parent)\r\n\t\t\t\t\tdata.parent.appendChild(data.el);\r\n\t\t\t\t$el.removeData('blockUI.history');\r\n\t\t\t}\r\n\r\n\t\t\tif ($el.data('blockUI.static')) {\r\n\t\t\t\t$el.css('position', 'static'); // #22\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof opts.onUnblock == 'function')\r\n\t\t\t\topts.onUnblock(el,opts);\r\n\r\n\t\t\t// fix issue in Safari 6 where block artifacts remain until reflow\r\n\t\t\tvar body = $(document.body), w = body.width(), cssW = body[0].style.width;\r\n\t\t\tbody.width(w-1).width(w);\r\n\t\t\tbody[0].style.width = cssW;\r\n\t\t}\r\n\r\n\t\t// bind/unbind the handler\r\n\t\tfunction bind(b, el, opts) {\r\n\t\t\tvar full = el == window, $el = $(el);\r\n\r\n\t\t\t// don't bother unbinding if there is nothing to unbind\r\n\t\t\tif (!b && (full && !pageBlock || !full && !$el.data('blockUI.isBlocked')))\r\n\t\t\t\treturn;\r\n\r\n\t\t\t$el.data('blockUI.isBlocked', b);\r\n\r\n\t\t\t// don't bind events when overlay is not in use or if bindEvents is false\r\n\t\t\tif (!full || !opts.bindEvents || (b && !opts.showOverlay))\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// bind anchors and inputs for mouse and key events\r\n\t\t\tvar events = 'mousedown mouseup keydown keypress keyup touchstart touchend touchmove';\r\n\t\t\tif (b)\r\n\t\t\t\t$(document).bind(events, opts, handler);\r\n\t\t\telse\r\n\t\t\t\t$(document).unbind(events, handler);\r\n\r\n\t\t// former impl...\r\n\t\t//\t\tvar $e = $('a,:input');\r\n\t\t//\t\tb ? $e.bind(events, opts, handler) : $e.unbind(events, handler);\r\n\t\t}\r\n\r\n\t\t// event handler to suppress keyboard/mouse events when blocking\r\n\t\tfunction handler(e) {\r\n\t\t\t// allow tab navigation (conditionally)\r\n\t\t\tif (e.type === 'keydown' && e.keyCode && e.keyCode == 9) {\r\n\t\t\t\tif (pageBlock && e.data.constrainTabKey) {\r\n\t\t\t\t\tvar els = pageBlockEls;\r\n\t\t\t\t\tvar fwd = !e.shiftKey && e.target === els[els.length-1];\r\n\t\t\t\t\tvar back = e.shiftKey && e.target === els[0];\r\n\t\t\t\t\tif (fwd || back) {\r\n\t\t\t\t\t\tsetTimeout(function(){focus(back);},10);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar opts = e.data;\r\n\t\t\tvar target = $(e.target);\r\n\t\t\tif (target.hasClass('blockOverlay') && opts.onOverlayClick)\r\n\t\t\t\topts.onOverlayClick(e);\r\n\r\n\t\t\t// allow events within the message content\r\n\t\t\tif (target.parents('div.' + opts.blockMsgClass).length > 0)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t// allow events for content that is not being blocked\r\n\t\t\treturn target.parents().children().filter('div.blockUI').length === 0;\r\n\t\t}\r\n\r\n\t\tfunction focus(back) {\r\n\t\t\tif (!pageBlockEls)\r\n\t\t\t\treturn;\r\n\t\t\tvar e = pageBlockEls[back===true ? pageBlockEls.length-1 : 0];\r\n\t\t\tif (e)\r\n\t\t\t\te.focus();\r\n\t\t}\r\n\r\n\t\tfunction center(el, x, y) {\r\n\t\t\tvar p = el.parentNode, s = el.style;\r\n\t\t\tvar l = ((p.offsetWidth - el.offsetWidth)/2) - sz(p,'borderLeftWidth');\r\n\t\t\tvar t = ((p.offsetHeight - el.offsetHeight)/2) - sz(p,'borderTopWidth');\r\n\t\t\tif (x) s.left = l > 0 ? (l+'px') : '0';\r\n\t\t\tif (y) s.top  = t > 0 ? (t+'px') : '0';\r\n\t\t}\r\n\r\n\t\tfunction sz(el, p) {\r\n\t\t\treturn parseInt($.css(el,p),10)||0;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/*global define:true */\r\n\tif (typeof define === 'function' && define.amd && define.amd.jQuery) {\r\n\t\tdefine('blockui',['jquery'], setup);\r\n\t} else {\r\n\t\tsetup(jQuery);\r\n\t}\r\n\r\n})();\r\n\n","define('sewisecontrol',[],function(){\r\n  /*\r\n * 视频、字幕\r\n * 基于sewise.player\r\n */\r\n\r\n    /*\r\n     * 带字幕的播放器\r\n     */\r\n    function player(){\r\n        this.config = {\r\n            //当前播放到的词的索引\r\n            \"currentWordIndex\": 0,\r\n            //当前播放到的行的索引\r\n            \"currentLineIndex\": 0\r\n        };\r\n    };\r\n\r\n    var _proto = player.prototype;\r\n\r\n    _proto.init = function(cfg){\r\n        var _self = this;\r\n\r\n        _self.config.cfg = cfg;\r\n        _self.$playZone = $('#playZone');\r\n        _self.videoElem = cfg.videoElem;\r\n        _self.subtitleElem = cfg.subtitleElem;\r\n        _self.subtitleScrollCont = cfg.subtitleElem.find('.subtitle-content');\r\n        _self.subtitleContainer = cfg.subtitleElem.find('.subtitle');\r\n        _self.$question = _self.$playZone.find('#question');\r\n        _self.$questionStem = _self.$playZone.find('#stem');\r\n        _self.$choice = _self.$playZone.find('#choices');\r\n        _self.$questionRight = _self.$playZone.find('#questionRight');\r\n        _self.$questionWrongWarn = _self.$playZone.find('#questionWrongWarn');\r\n        _self.$questionWarning = _self.$questionWrongWarn.find('#questionWarning');\r\n        _self.$questionWrongSkip = _self.$playZone.find('#questionWrongSkip');\r\n        _self.$questionSkipThumb = _self.$questionWrongSkip.find('#questionSkipThumb');\r\n        _self.$questionSkipButton = _self.$questionWrongSkip.find('#questionSkipButton');\r\n        _self.$questionWrongContinue = _self.$playZone.find('#questionWrongContinue');\r\n        _self.$functionAside = $('#functionAside');\r\n        _self.srtJson = cfg.srtJson;\r\n        //播放器初始化完毕\r\n        _self.playReady = false;\r\n        _self.isPause = true;\r\n\r\n        _self.currentTime = 0;\r\n\r\n        //可以点词播放\r\n        _self.config.wordClickEvent = true;\r\n        //碎片分享模式下不能自动滚动字幕\r\n        _self.config.isClipMode = false;\r\n\r\n        _self.loadSubtitle(cfg);\r\n        _self.initEvent();\r\n\r\n        // study mode toolbar\r\n        _self.initStudyBar(cfg);\r\n\r\n        // annotation layer\r\n        _self.initAnnotation(cfg);\r\n\r\n        // question\r\n        _self.initQuestion(cfg);\r\n\r\n        //当sewise播放器准备好时回调\r\n        window.playerReady = function(){\r\n            //console.log(\"Sewise Player On Ready\");\r\n            _self.playReady = true;\r\n\r\n            window.onStart = function(){\r\n                //console.log(\"onStart\");\r\n                _self.isPause = false;\r\n            };\r\n\r\n            window.onPause = function(){\r\n                //console.log(\"onPause\");\r\n                _self.isPause = true;\r\n            };\r\n\r\n            window.onStop = function(){\r\n                //console.log(\"onStop\");\r\n            };\r\n\r\n            //进度条改变时\r\n            window.onSeek = function(time){\r\n                if (_self.isPause){\r\n                    _self.progress(time);\r\n                }\r\n            };\r\n\r\n            //播放时\r\n            window.onPlayTime = function(time){\r\n                if (!_self.isPause){\r\n                    _self.progress(time);\r\n                }\r\n            };\r\n\r\n            _self.setSubtitle(_self.subtitleJson, cfg);\r\n\r\n            if (cfg.callbackFunc){\r\n                cfg.callbackFunc();\r\n            }\r\n        }\r\n    };\r\n\r\n    // study mode toolbar\r\n    _proto.initStudyBar = function(cfg){\r\n      var me = this,\r\n        $studyModeSwitch = $('#studyModeSwitch');\r\n\r\n      $studyModeSwitch.change(function(){\r\n        if($studyModeSwitch.is(':checked')){\r\n          me.$functionAside.addClass('learn-mode');\r\n        }else{\r\n          me.$functionAside.removeClass('learn-mode');\r\n          me.$annotation.stop().hide();\r\n          clearTimeout(me.annotationTimeout);\r\n          me.$question.hide();\r\n          me.$questionRight.hide();\r\n          me.$questionWrongWarn.hide();\r\n          me.$questionWrongSkip.hide();\r\n          me.$questionSkipButton.hide();\r\n        }\r\n      });\r\n\r\n      /*me.$appendix = $('#appendix').scroll(function(evt){\r\n        evt.stopPropagation();\r\n      });\r\n      me.$highlights = $('#hilites').scroll(function(evt){\r\n        evt.stopPropagation();\r\n      });\r\n\r\n      $('#buttonAppendix').click(function(){\r\n        if(!$(this).hasClass('disable')){\r\n          if(me.$appendix.is(':visible')){\r\n            me.$appendix.stop().fadeOut('fast');\r\n          }else{\r\n            me.$highlights.stop().hide();\r\n            me.$appendix.stop().fadeIn('fast');\r\n          }\r\n        }\r\n      });\r\n      $('#buttonHilite').click(function(){\r\n        if(!$(this).hasClass('disable')){\r\n          if(me.$highlights.is(':visible')){\r\n            me.$highlights.stop().fadeOut('fast');\r\n          }else{\r\n            me.$appendix.stop().hide();\r\n            me.$highlights.stop().fadeIn('fast');\r\n          }\r\n        }\r\n      });\r\n\r\n      me.$appendix.find('.close').click(function(){\r\n        me.$appendix.stop().fadeOut('fast');\r\n      });\r\n      me.$highlights.find('.close').click(function(){\r\n        me.$highlights.stop().fadeOut('fast');\r\n      });*/\r\n    };\r\n\r\n    // study mode toolbar\r\n    _proto.initAnnotation = function(cfg){\r\n      var me = this;\r\n\r\n      me.$annotation = $('#annotationPane');\r\n      me.$annotationContent = $('#annotationContent');\r\n\r\n      me.subtitleContainer.on('mouseenter', '.annotation', function(){\r\n        if(me.$functionAside.hasClass('learn-mode')){\r\n          var targetIndex = parseInt($(this).data('annotationindex'));\r\n          if(targetIndex !== me.annotationOnStage){\r\n            var currentAnnotation = me.annotations[targetIndex];\r\n            me.$annotation.stop().hide();\r\n            me.$annotationContent.html(currentAnnotation.content);\r\n            me.$annotation.fadeIn('fast');\r\n            me.annotationOnStage = targetIndex;\r\n            clearTimeout(me.annotationTimeout);\r\n          }else{\r\n            clearTimeout(me.annotationTimeout);\r\n            me.$annotation.fadeIn('fast');\r\n          }\r\n        }\r\n      });\r\n\r\n      me.subtitleContainer.on('mouseout', '.annotation', hideAnnotation);\r\n\r\n      me.$annotation.on({\r\n        mouseenter: function(){\r\n          clearTimeout(me.annotationTimeout);\r\n        },\r\n        mouseout: function(evt){\r\n          if(!me.$annotation.is(evt.relatedTarget) && !$.contains(this, evt.relatedTarget)){\r\n            hideAnnotation();\r\n          }\r\n        }\r\n      }).find('.close').click(function(){\r\n        clearTimeout(me.annotationTimeout);\r\n        me.$annotation.stop().hide();\r\n        return false;\r\n      });\r\n\r\n      function hideAnnotation(f){\r\n        me.annotationTimeout = setTimeout(function (){\r\n          me.$annotation.stop().hide();\r\n        }, 3000);\r\n      }\r\n    }\r\n\r\n    // question\r\n    _proto.initQuestion = function(cfg){\r\n      var me = this;\r\n      me.$question.on('click', '.choiceItem', function(){\r\n        var $this = $(this),\r\n          question = me.questions[me.nextQuestion];\r\n        me.$question.hide();\r\n        if($this.data('value') === question.answer[0]){\r\n          question.passed = true;\r\n          me.nextQuestion++;\r\n          me.$questionRight.show();\r\n          setTimeout(function(){\r\n            me.$questionRight.fadeOut('fast', function(){\r\n              SewisePlayer.doPlay();\r\n            });\r\n          }, 2000);\r\n        }else{\r\n          switch(question.operation){\r\n            case 'goto':\r\n              me.$questionSkipThumb.attr('src', question.operationDetail[1]);\r\n              me.$questionSkipButton.off('click').click(function(){\r\n                me.$questionWrongSkip.fadeOut('fast', function(){\r\n                  SewisePlayer.doSeek(question.operationDetail[0]);\r\n                  SewisePlayer.doPlay();\r\n                });\r\n                return false;\r\n              });\r\n              me.$questionWrongSkip.show();\r\n              break;\r\n            case 'tips':\r\n              me.$questionWarning.text(question.operationDetail);\r\n              me.$questionWrongWarn.show();\r\n              break;\r\n            default:\r\n              me.$questionWrongContinue.show();\r\n              setTimeout(function(){\r\n                me.$questionWrongContinue.fadeOut('fast', function(){\r\n                  SewisePlayer.doPlay();\r\n                });\r\n              });\r\n          }\r\n        }\r\n      });\r\n      me.$questionWrongWarn.find('#doItAgain').click(function(){\r\n        me.$questionWrongWarn.hide();\r\n        me.$question.show();\r\n      });\r\n    };\r\n\r\n    //加载字幕\r\n    _proto.loadSubtitle = function(cfg){\r\n        var _self = this;\r\n\r\n        $.getJSON(_self.srtJson, function(json){\r\n            //console.log('json', json);\r\n            if (json == '' || json == undefined){\r\n                console.log('Subtitle load error.');\r\n            } else {\r\n                _self.subtitleLoaded = true;\r\n                _self.subtitleJson = json;\r\n                _self.setSubtitle(json, cfg);\r\n            }\r\n        }).fail(function(){\r\n            _self.subtitleContainer.html('<li>Failed to load subtitles.</li>');\r\n        });\r\n    };\r\n\r\n    //设置字幕DOM\r\n    var tplHiliteItem = $.trim($('#tplHighlightItem').remove().html());\r\n    _proto.setSubtitle = function(subtitle, cfg){\r\n        var _self = this;\r\n\r\n        if(this.playReady === true && this.subtitleLoaded === true){\r\n\r\n          _self.subtitleContainer.empty();\r\n\r\n          var srt = subtitle.subtitles;\r\n\r\n          // subtitles\r\n          var subtitleSchema = subtitle.subtitleSchema,\r\n            tokenIndex = subtitleSchema.indexOf('token'),\r\n            stIndex = subtitleSchema.indexOf('st'),\r\n            etIndex = subtitleSchema.indexOf('et'),\r\n            scoreIndex = subtitleSchema.indexOf('score');\r\n\r\n          // annotations\r\n          var annotationSchema = subtitle.annotationSchema;\r\n          if(annotationSchema){\r\n            var annotationSerie = subtitle.annotations,\r\n              aStIndex = annotationSchema.indexOf('st'),\r\n              aEtIndex = annotationSchema.indexOf('et'),\r\n              aContentIndex = annotationSchema.indexOf('content'),\r\n              annotations = [],\r\n              currentAnnotation = 0,\r\n              isInAnnotation;\r\n            for(var aIndex = 0, aLength = annotationSerie.length; aIndex < aLength; aIndex++){\r\n              annotations.push({\r\n                st: annotationSerie[aIndex][aStIndex],\r\n                et: annotationSerie[aIndex][aEtIndex],\r\n                content: annotationSerie[aIndex][aContentIndex]\r\n              });\r\n            }\r\n            this.annotations = annotations;\r\n          }\r\n\r\n          // highlights\r\n          var highlightSchema = subtitle.highlightSchema;\r\n          if(highlightSchema){\r\n            var hStIndex = highlightSchema.indexOf('st'),\r\n              hEtIndex = highlightSchema.indexOf('et'),\r\n              hTitleIndex = highlightSchema.indexOf('title'),\r\n              hBriefIndex = highlightSchema.indexOf('brief'),\r\n              hThumbIndex = highlightSchema.indexOf('thumbnail'),\r\n              highlightSerie = subtitle.highlights,\r\n              highlights = [],\r\n              $hiliteList = $('#hiliteList');\r\n            if(highlightSerie.length){\r\n              $('#buttonHilite').removeClass('disable');\r\n              for(var hIndex = 0, hLength = highlightSerie.length; hIndex < hLength; hIndex++){\r\n                var hCurrent = highlightSerie[hIndex];\r\n                highlights.push(tplHiliteItem.\r\n                  // replace(/\\{link\\}/g, '#').\r\n                  replace(/\\{number\\}/g, hIndex + 1).\r\n                  replace(/\\{thumb\\}/g, hCurrent[hThumbIndex]).\r\n                  replace(/\\{heading\\}/g, hCurrent[hTitleIndex]).\r\n                  replace(/\\{start\\}/g, hCurrent[hStIndex]).\r\n                  replace(/\\{end\\}/g, hCurrent[hEtIndex])\r\n                );\r\n              }\r\n              $hiliteList.html(highlights.join('')).on('click', '.hiliteLink', function(){\r\n                if (_self.playReady){\r\n                    SewisePlayer.doSeek($(this).data('start'));\r\n                    // _self.$highlights.fadeOut('fast');\r\n                }\r\n              });\r\n            }else{\r\n              $('.tab a').eq(1).addClass('disable');\r\n            }\r\n          }\r\n\r\n          // appendix\r\n          var $appendixContent = $('#appendixContent');\r\n          if(subtitle.appendix){\r\n            $appendixContent.html(subtitle.appendix);\r\n          }else{\r\n            $('.tab a').eq(2).addClass('disable');\r\n          }\r\n\r\n          // questions\r\n          var questionSchema = subtitle.questionSchema;\r\n          if(questionSchema){\r\n            var choiceSchema = subtitle.choiceSchema,\r\n              questionSerie = subtitle.questions,\r\n              questions = [];\r\n            for(var index = 0, questionCount = questionSerie.length, questionItem, questionObject; index < questionCount; index++){\r\n              questionItem = questionSerie[index];\r\n              questionObject = {};\r\n              for(var qKeyIndex = 0, qKeyLength = questionSchema.length, choiceSerie; qKeyIndex < qKeyLength; qKeyIndex++){\r\n                if(questionSchema[qKeyIndex] === 'choices'){\r\n                  choiceSerie = questionItem[qKeyIndex];\r\n                  questionObject.choices = [];\r\n                  for(var choiceIndex = 0, choiceCount = choiceSerie.length, choiceItem, choiceObject; choiceIndex < choiceCount; choiceIndex++){\r\n                    choiceItem = choiceSerie[choiceIndex];\r\n                    choiceObject = {};\r\n                    for(var cKeyIndex = 0, cKeyLength = choiceSchema.length; cKeyIndex < cKeyLength; cKeyIndex++){\r\n                      choiceObject[choiceSchema[cKeyIndex]] = choiceItem[cKeyIndex];\r\n                    }\r\n                    questionObject.choices.push(choiceObject);\r\n                  }\r\n                }else{\r\n                  questionObject[questionSchema[qKeyIndex]] = questionItem[qKeyIndex];\r\n                }\r\n              }\r\n              questions[index] = questionObject;\r\n            }\r\n            this.questions = questions;\r\n            this.nextQuestion = 0;\r\n          }\r\n\r\n          var subtitleLength = subtitle.length;\r\n          var wordIndex = 0;\r\n          var lineTpl = '<li class=\"line\"></li>';\r\n          var wordTpl = '<span class=\"word\"></span>';\r\n          var subtitleArray = _self.subtitleArray = [];\r\n\r\n          for (var i = 0, srtLength = srt.length; i < srtLength; i++){\r\n              var lineLength = srt[i].length;\r\n              var lineObj = $(lineTpl);\r\n              lineObj.attr({\"id\": 'line_' + i}).data({\"index\": i});\r\n              var pre = null;\r\n              var lineProperties = {\r\n                \"index\": i,\r\n                \"st\": srt[i][0][stIndex],\r\n                \"et\": srt[i][lineLength - 1][etIndex]\r\n              };\r\n              for (var j = 0; j < lineLength; j++){\r\n                  var wordObj = $(wordTpl);\r\n                  var word = srt[i][j];\r\n                  var wordTxt = word[tokenIndex];\r\n                  var addSpace = false;\r\n                  var wordProperties = {\r\n                    \"index\": wordIndex,\r\n                    \"st\": word[stIndex],\r\n                    \"et\": word[etIndex]\r\n                  };                  \r\n\r\n                  if (j == 0){\r\n                      lineObj.attr(lineProperties).data(lineProperties);\r\n                  }\r\n\r\n                  //添加词之间的空白\r\n                  if (pre != null && /^(\\w|\\d)/.test(wordTxt) && (!(/^(ve|s|ll)$/i).test(wordTxt) || !(/^(\\'|’)$/).test(pre))){\r\n                      lineObj.append('<pre class=\"space' + (isInAnnotation ? ' comment annotation\" data-annotationIndex=\"' + currentAnnotation + '\"' : '\"') + '> </pre>');\r\n                      addSpace = true;\r\n                  }\r\n                  pre = wordTxt;\r\n\r\n                  if (addSpace){\r\n                      wordTxt = ' ' + wordTxt;\r\n                  }\r\n\r\n                  wordObj.attr($.extend({\"id\": 'word_' + wordIndex}, wordProperties)).data(wordProperties);\r\n                  wordObj.text(wordTxt);\r\n\r\n                  wordObj.appendTo(lineObj);\r\n                  subtitleArray.push(wordObj);\r\n                  wordIndex++;\r\n\r\n                  // annotation\r\n                  if(annotations && annotations[currentAnnotation] && wordProperties.st === annotations[currentAnnotation].st){\r\n                    isInAnnotation = true;\r\n                  }\r\n                  if(isInAnnotation){\r\n                    wordObj.addClass('comment annotation');\r\n                    wordObj.data('annotationindex', currentAnnotation);\r\n                  }\r\n\r\n                  if(isInAnnotation && wordProperties.et === annotations[currentAnnotation].et){\r\n                    isInAnnotation = false;\r\n                    currentAnnotation++;\r\n                  }\r\n              }\r\n\r\n              lineObj.appendTo(_self.subtitleContainer);\r\n          }\r\n\r\n\r\n          //所有行的jq对象\r\n          _self.lineElemArray = _self.subtitleContainer.find('.line');\r\n\r\n          //console.log('_self.lineElemArray', _self.lineElemArray);\r\n\r\n          _self.subtitleIsLoaded = true;\r\n          //是否自动滚动字幕\r\n          _self.config.isAutoScroll = true;\r\n\r\n          if (cfg.subtitleCallbackFunc){\r\n              cfg.subtitleCallbackFunc(_self.lineElemArray);\r\n          }\r\n        }\r\n    };\r\n\r\n    //加载字幕\r\n    _proto.initEvent = function(){\r\n        var _self = this;\r\n\r\n        _self.subtitleScrollCont.on('scroll', function(){\r\n            _self.stopMoveScroll();\r\n        });\r\n\r\n        _self.subtitleScrollCont.on('click', '.word', function(e){\r\n            e.stopPropagation();\r\n\r\n            if (_self.playReady && _self.config.wordClickEvent){\r\n                var word = $(this);\r\n\r\n                SewisePlayer.doSeek(word.attr('st'));\r\n            }\r\n        });\r\n    };\r\n\r\n    //播放时\r\n    _proto.progress = function(time){\r\n        var _self = this,\r\n          nextQuestion;\r\n        _self.currentTime = time;\r\n\r\n        //自动播放字幕\r\n        if (_self.subtitleIsLoaded){\r\n            var array = _self.subtitleArray;\r\n            var wordLength = array.length;\r\n\r\n            for (var i = 0; i < wordLength; i++){\r\n                var wordObj = array[i];\r\n\r\n                if (wordObj.data('st') <= time && wordObj.data('et') >= time){\r\n                    if (_self.config.currentWordIndex != i){\r\n                        //当前行\r\n                        var currentLine = wordObj.parent('li');\r\n                        var currentLineIndex = currentLine.data('index');\r\n\r\n                        if (_self.config.currentLineIndex == 0){\r\n                            _self.subtitleElem.find('#line_' + _self.config.currentLineIndex).addClass('current-line');\r\n                        }\r\n                        //设置当前行样式\r\n                        if (_self.config.currentLineIndex != currentLineIndex){\r\n                            _self.subtitleElem.find('#line_' + _self.config.currentLineIndex).removeClass('current-line');\r\n                            _self.config.currentLineIndex = currentLineIndex;\r\n                            currentLine.addClass('current-line');\r\n                        }\r\n                        //设置当前词样式\r\n                        _self.subtitleElem.find('#word_' + _self.config.currentWordIndex).removeClass('current-word');\r\n                        _self.config.currentWordIndex = i;\r\n                        wordObj.addClass('current-word');\r\n                        //滚动字幕框\r\n                        _self.moveScroll(currentLine);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // show question\r\n            // if(nextQuestion && time)\r\n            if(questions){\r\n              nextQuestion = _self.questions[_self.nextQuestion];\r\n              if(_self.$functionAside.hasClass('learn-mode') && nextQuestion && nextQuestion.time < time && !nextQuestion.passed){\r\n                _self.showQuestion(nextQuestion);\r\n              }\r\n            }\r\n        }\r\n    };\r\n\r\n    // show question\r\n    var tplChoice = $.trim($('#tplChoice').remove().html());\r\n    _proto.showQuestion = function(question){\r\n      var choices = question.choices,\r\n        choiceFragments = [];\r\n\r\n      SewisePlayer.noramlScreen();\r\n      this.pause();\r\n\r\n      this.$questionStem.html(question.question);\r\n      for(var index = 0, length = choices.length; index < length; index++){\r\n        choiceFragments.push(tplChoice.\r\n          replace(/\\{value\\}/g, choices[index].value).\r\n          replace(/\\{description\\}/g, choices[index].description)\r\n        )\r\n      }\r\n      this.$choice.html(choiceFragments.join(''));\r\n      this.$question.show();\r\n    };\r\n\r\n    //滚动字幕框\r\n    _proto.moveScroll = function(line){\r\n        var _self = this;\r\n\r\n        if (_self.config.isAutoScroll && !_self.config.isClipMode){\r\n            _self.subtitleScrollCont.scrollTop(line.position().top - 48);\r\n        }\r\n    };\r\n\r\n    //停止滚动字幕框\r\n    _proto.stopMoveScroll = function(){\r\n        var _self = this;\r\n\r\n        _self.config.isAutoScroll = false;\r\n        clearTimeout(_self.config.scrollTimer);\r\n        _self.config.scrollTimer = window.setTimeout(function(){\r\n            _self.config.isAutoScroll = true;\r\n        }, 3000);\r\n    };\r\n\r\n    //暂停\r\n    _proto.pause = function(){\r\n        SewisePlayer.doPause();\r\n    };\r\n\r\n    //重新播放\r\n    _proto.replay = function(){\r\n        SewisePlayer.doSeek(0);\r\n    };\r\n\r\n    //获取当前播放时间\r\n    _proto.getCurrentTime = function(){\r\n        return this.currentTime;\r\n    };\r\n\r\n    //获取当前行\r\n    _proto.getCurrentLineIndex = function(){\r\n        return this.config.currentLineIndex;\r\n    };\r\n\r\n    //播放完后\r\n    /*_proto.finish = function(){\r\n        var _self = this;\r\n        var api = _self.config.api;\r\n        var cfg = _self.config.cfg;\r\n\r\n        if (cfg.finishCallback){\r\n            cfg.finishCallback();\r\n        }\r\n    };*/\r\n\r\n  return {\r\n    player: player,\r\n    /* this is a shim for sewise player, as it doesn't support custom container */\r\n    load: function(container, callback){\r\n      if(typeof container == 'string'){\r\n        container = document.getElementById(container);\r\n      }\r\n      if(container){\r\n        var script = document.createElement('script');\r\n        script.onload = callback;\r\n        script.src = '/source/dist/scripts/lib/sewise.player.min.js';\r\n        container.appendChild(script);\r\n      }\r\n    }\r\n  };\r\n});\n","/*\r\n * 碎片分享滑块控件\r\n * 与player_sewise.js相关，基于sewise.player\r\n */\r\n\r\nwindow.JLib = window.JLib || {};\r\n\r\ndefine('clip',['jquery'], function(){\r\n\r\n  function clipCtl(){\r\n    this.config = {};\r\n    this.player = null;\r\n    this.mask = null;\r\n  };\r\n  //prototype\r\n  var _proto = clipCtl.prototype;\r\n\r\n  //初始化\r\n  _proto.init = function (cfg) {\r\n    var _clip = this;\r\n    _clip.config.cfg = cfg;\r\n\r\n    //视频字幕容器\r\n    _clip.container = cfg.container;\r\n    //视频预览容器\r\n    _clip.videoCont = null;\r\n\r\n    //字幕分享控件最外元素\r\n    _clip.ctlObj = $('#subtitle').on('click', '.addnoteBtn', cfg.addShow);\r\n    _clip.ctlObjBox = _clip.ctlObj.find('.subtitle-box');\r\n\r\n    //装载字幕有滚动条的元素\r\n    _clip.ctlScrollObj = _clip.ctlObj.find('.subtitle-content');\r\n\r\n    //装载字幕的UL\r\n    _clip.ctlSubtitleCont = _clip.ctlObj.find('.subtitle');\r\n\r\n    //预览\r\n    _clip.previewCont = _clip.container.find('#video_preview_cont');\r\n    //sewise播放器目前版本不支持同一页面有多个播放地址，用iframe解决\r\n    _clip.previewIframe = _clip.previewCont.find('#video_preview_iframe');\r\n\r\n    //字幕行高\r\n    _clip.config.lineHeight = cfg.lineHeight;\r\n    //分享前所播放的行\r\n    _clip.config.currentLine = cfg.currentLine;\r\n\r\n    //初始化碎片分享控件元素\r\n    _clip.initShareDom();\r\n    //字幕容器事件\r\n    _clip.subtitleElemEvent();\r\n    //开始杆\r\n    _clip.startElemEvent();\r\n    //结束杆\r\n    _clip.endElemEvent();\r\n    //控件鼠标放开事件\r\n    _clip.mouseup();\r\n    //开始滑块\r\n    _clip.sliderStartEvent();\r\n    //结束滑块\r\n    _clip.sliderEndEvent();\r\n  };\r\n\r\n  //初始化碎片分享控件元素\r\n  _proto.initShareDom = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    _clip.ctlObj.find('.subtitle-content').addClass('subtitle-edit'); // clip-subtitle-mode\r\n\r\n    //开始杆元素\r\n    _clip.startElem = $('<span class=\"clip-share-start hidden\" id=\"select_start\" title=\"Clip start\"></span>').appendTo(_clip.ctlObjBox);\r\n    //开始杆元素处在鼠标按下激活状态\r\n    _clip.startElemActive = false;\r\n\r\n    //结束杆元素\r\n    _clip.endElem = $('<span class=\"clip-share-end hidden\" id=\"select_end\" title=\"Clip end\"></span>').appendTo(_clip.ctlObjBox);\r\n    //结束杆元素处在鼠标按下激活状态\r\n    _clip.endElemActive = false;\r\n\r\n    //杆元素宽高\r\n    _clip.config.ctlElemWidth = _clip.startElem.width();\r\n    _clip.config.ctlElemHeight = _clip.startElem.height();\r\n\r\n    //分享、预览、关闭\r\n    var shareActionHtml = [\r\n      '<div class=\"subtitle-action sa-edit\">',\r\n      '<div class=\"btn-w\">',\r\n      '<a href=\"\" class=\"btn-line btn-clip-preview preview\"><i class=\"icon-play\"></i><span>预览</span></a>',\r\n      '<a id=\"addnoteBtn\" href=\"javascript:;\" class=\"btn-line addnoteBtn\"><i class=\"icon-note\" ></i><span>添加到笔记</span></a>',\r\n      '</div>',\r\n      '<div class=\"share-w\">',\r\n//      '<ul class=\"share-list\">',\r\n//      '<li><a href=\"\" class=\"qzone\">Qzone</a></li>',\r\n//      '</ul>',\r\n      '<div class=\"jiathis_style_32x32\">',\r\n        '<a class=\"jiathis_button_qzone\"></a>',\r\n        '<a class=\"jiathis_button_googleplus\" title=\"Google+\"></a>',\r\n        '<a class=\"jiathis_button_tsina\" title=\"Sina weibo\"></a>',\r\n        '<a class=\"jiathis_button_weixin\" title=\"Weixin\"></a>',\r\n      '</div>',\r\n      '<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>',\r\n      '<!-- JiaThis Button END -->',\r\n      '</div>',\r\n      '<div class=\"close-w\">',\r\n      '<a href=\"\" class=\"close\"><i class=\"icon-times\"></i></a>',\r\n      '</div>',\r\n      '</div>'\r\n    ].join('');\r\n\r\n    _clip.shareActionElem = $(shareActionHtml).appendTo(_clip.ctlObj);\r\n\r\n    //碎片时长\r\n    _clip.clipTimeElem = _clip.shareActionElem.find('#clip_time');\r\n\r\n    //视频预览\r\n    _clip.shareActionElem.on('click', '.preview', function (e) {\r\n      e.preventDefault();\r\n\r\n      _clip.clipPreview(config.clipStartTime, config.clipEndTime);\r\n    });\r\n\r\n    _clip.shareActionElem.on('mouseenter', '.jiathis_style_32x32 .jiathis_txt', function (e) {\r\n      jiathis_config.url = JLib.config.hostname + '/play/' + JLib.config.fragment_playid;\r\n      setShareSummary(e, config.cfg.share.title, config.cfg.share.from);\r\n    });\r\n\r\n    //关闭分享\r\n    _clip.shareActionElem.on('click', '.close', function (e) {\r\n      e.preventDefault();\r\n\r\n      _clip.destroy();\r\n    });\r\n\r\n    //范围滑块选择工具条\r\n    var sliderBarHtml = [\r\n      '<div class=\"clip-share-bar\" id=\"clip_share_bar\">',\r\n      '<div class=\"bar\">',\r\n      '<div class=\"slider\" id=\"slider_start\" style=\"left: -17px;\">',\r\n      '<span class=\"el\" title=\"slider start\"></span>',\r\n      '<span class=\"time\"><span></span></span>',\r\n      '</div>',\r\n      '<div class=\"slider\" id=\"slider_end\" style=\"left: 0;\">',\r\n      '<span class=\"el\" title=\"slider end\"></span>',\r\n      '<span class=\"time\"><span></span></span>',\r\n      '</div>',\r\n      '<span class=\"range\" id=\"slider_range\"></span>',\r\n      '</div>',\r\n      '</div>'\r\n    ].join('');\r\n\r\n    //滑块对象\r\n    var sliderBar = _clip.sliderBar = {};\r\n    //滑块最外层容器\r\n    sliderBar.elem = $(sliderBarHtml).appendTo(_clip.ctlObj);\r\n    sliderBar.bar = sliderBar.elem.find('.bar');\r\n    sliderBar.barWidth = sliderBar.bar.width();\r\n    //滑块开始元素，包括控制元素，时间元素\r\n    sliderBar.start = sliderBar.elem.find('#slider_start');\r\n    //滑块开始控制元素，有拖动事件\r\n    sliderBar.startCtl = sliderBar.start.find('.el');\r\n    //滑块开始控制元素是否激活\r\n    sliderBar.startActive = false;\r\n    //滑块开始时间元素\r\n    sliderBar.stElem = sliderBar.start.find('.time');\r\n    sliderBar.stElem.click(function () {\r\n      $(this).addClass('hidden');\r\n    });\r\n    sliderBar.stElem.time = sliderBar.stElem.find('span');\r\n\r\n    //滑块结束元素，包括控制元素，时间元素\r\n    sliderBar.end = sliderBar.elem.find('#slider_end');\r\n    //滑块结束控制元素，有拖动事件\r\n    sliderBar.endCtl = sliderBar.end.find('.el');\r\n    //滑块结束控制元素是否激活\r\n    sliderBar.endActive = false;\r\n    //滑块结束时间元素\r\n    sliderBar.etElem = sliderBar.end.find('.time');\r\n    sliderBar.etElem.click(function () {\r\n      $(this).addClass('hidden');\r\n    });\r\n    sliderBar.etElem.time = sliderBar.etElem.find('span');\r\n\r\n    //滑块元素宽度\r\n    sliderBar.ctlWidth = sliderBar.start.width();\r\n    //滑块所选范围条元素\r\n    sliderBar.rangeElem = sliderBar.elem.find('#slider_range');\r\n\r\n    //点击空白处关闭分享状态\r\n    var ctlScrollObjEvent = function (e) {\r\n      if (!_clip.config.mouseIsMove && !_clip.isDestroy) {\r\n        _clip.destroy();\r\n        _clip.ctlScrollObj.off('click', ctlScrollObjEvent);\r\n      }\r\n    };\r\n    _clip.ctlScrollObj.on('click', ctlScrollObjEvent);\r\n  };\r\n\r\n  //关闭分享\r\n  _proto.destroy = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    _clip.ctlObj.find('.subtitle-content').removeClass('clip-subtitle-mode');\r\n\r\n    _clip.shareActionElem.addClass('destroy');\r\n    //删除clip相关元素\r\n    setTimeout(function () {\r\n      _clip.shareActionElem.remove();\r\n    }, 200);\r\n    _clip.startElem.remove();\r\n    _clip.endElem.remove();\r\n    _clip.previewCont.addClass('hidden');\r\n    _clip.previewIframe[0].src = '';\r\n\r\n    _clip.sliderBar.elem.remove();\r\n    //_clip.sliderBar = null;\r\n\r\n    //清除选择高亮\r\n    _clip.subtitleLine.eq(config.currentLine).addClass('current-line');\r\n    _clip.ctlSubtitleCont.find('.selected-line').removeClass('selected-line');\r\n    _clip.ctlSubtitleCont.find('.selected-word').removeClass('selected-word');\r\n    _clip.ctlSubtitleCont.find('.selected-space').removeClass('selected-space');\r\n\r\n    _clip.ctlObjBox.off('mousedown').off('mousemove');\r\n\r\n    //恢复点词播放\r\n    _clip.player.config.wordClickEvent = true;\r\n    //恢复字幕自动滚动\r\n    _clip.autoScroll();\r\n\r\n    _clip.isDestroy = true;\r\n  };\r\n\r\n  //设置元素值拖动范围\r\n  _proto.setLimit = function (cfg) {\r\n    var _clip = this;\r\n\r\n    if (!_clip.ctlObjBoxWidth) {\r\n      _clip.ctlObjBoxWidth = _clip.ctlObjBox.width();\r\n      _clip.ctlObjBoxHeight = _clip.ctlObjBox.height();\r\n    }\r\n  };\r\n\r\n  //字幕容器的事件\r\n  _proto.subtitleElemEvent = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n    var ctlObjBox = _clip.ctlObjBox;\r\n    var body = $('body');\r\n    var downLeft = 0;\r\n    var downTop = 0;\r\n    var upLeft = 0;\r\n    var upTop = 0;\r\n\r\n    ctlObjBox.mousedown(function (e) {\r\n      _clip.setLimit();\r\n      config.mouseIsMove = false;\r\n\r\n      //如果不是通过开始、结束杆冒泡上来的\r\n      if (!_clip.startElemActive && !_clip.endElemActive) {\r\n        _clip.subtitleElemActive = true;\r\n        downLeft = e.pageX - ctlObjBox.offset().left;\r\n        downTop = e.pageY - ctlObjBox.offset().top;\r\n\r\n        body.mouseup(bodyMouseup);\r\n      }\r\n    });\r\n\r\n    ctlObjBox.mousemove(function (e) {\r\n      config.mouseIsMove = true;\r\n      if (!_clip.startElemActive && !_clip.endElemActive) {\r\n        if (_clip.subtitleElemActive) {\r\n          var moveLeft = e.pageX - ctlObjBox.offset().left;\r\n          var moveTop = e.pageY - ctlObjBox.offset().top;\r\n          var minNum = 10;\r\n\r\n          if (Math.abs(moveLeft - downLeft) > minNum || Math.abs(moveTop - downTop) > minNum) {\r\n            _clip.subtitleElemMoved = true;\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    function bodyMouseup(e) {\r\n      _clip.subtitleElemActive = false;\r\n\r\n      if (_clip.subtitleElemMoved) {\r\n        _clip.subtitleElemMoved = false;\r\n\r\n        upLeft = e.pageX - ctlObjBox.offset().left;\r\n        upTop = e.pageY - ctlObjBox.offset().top;\r\n\r\n        var startTop = 0;\r\n        var startLeft = 0;\r\n        var endTop = 0;\r\n        var endLeft = 0;\r\n        var topTemp = 0;\r\n        var leftTemp = 0;\r\n\r\n        var minL = 16;\r\n        var maxL = _clip.ctlObjBoxWidth + 16;\r\n        var minT = 10;\r\n        var maxT = _clip.ctlObjBoxHeight + 10;\r\n\r\n        //修正极限\r\n        downLeft = downLeft < minL ? minL : downLeft;\r\n        downLeft = downLeft > maxL ? maxL : downLeft;\r\n        //downTop = downTop < minT ? minT : Math.floor(downTop / config.lineHeight) * config.lineHeight + 10;\r\n        //downTop = downTop > maxT ? maxT : Math.floor(downTop / config.lineHeight) * config.lineHeight + 10;\r\n        downTop = downTop < minT ? minT : downTop;\r\n        downTop = downTop > maxT ? maxT : downTop;\r\n\r\n        upLeft = upLeft < minL ? minL : upLeft;\r\n        upLeft = upLeft > maxL ? maxL : upLeft;\r\n        //upTop = upTop < minT ? minT : Math.floor(upTop / config.lineHeight) * config.lineHeight + 10;\r\n        //upTop = upTop > maxT ? maxT : Math.floor(upTop / config.lineHeight) * config.lineHeight + 10;\r\n        upTop = upTop < minT ? minT : upTop;\r\n        upTop = upTop > maxT ? maxT : upTop;\r\n\r\n        //如果鼠标按下时的坐标高于放开时，交换双方坐标\r\n        if ((downTop > upTop) || (downTop == upTop && downLeft > upLeft)) {\r\n          topTemp = downTop;\r\n          downTop = upTop;\r\n          upTop = topTemp;\r\n\r\n          leftTemp = downLeft;\r\n          downLeft = upLeft;\r\n          upLeft = leftTemp;\r\n        }\r\n\r\n        startTop = downTop;\r\n        startLeft = downLeft - config.ctlElemWidth;\r\n        startLeft = startLeft < minL ? minL : startLeft;\r\n        endTop = upTop - config.ctlElemHeight;\r\n        endLeft = upLeft;\r\n\r\n        if (endTop - startTop < 0) {\r\n          endTop = startTop;\r\n        }\r\n\r\n        if (endLeft - startLeft < config.ctlElemWidth) {\r\n          endLeft = startLeft + config.ctlElemWidth;\r\n        }\r\n\r\n        //清除用鼠标选择的文本高亮色\r\n        _clip.clearWinSelection();\r\n        _clip.startElem.css({\r\n          \"top\": startTop,\r\n          \"left\": startLeft\r\n        });\r\n\r\n        _clip.endElem.css({\r\n          \"top\": endTop,\r\n          \"left\": endLeft\r\n        });\r\n\r\n        //设置被选的字幕\r\n        _clip.setSelected({\r\n          \"top\": startTop,\r\n          \"left\": startLeft + config.ctlElemWidth,\r\n          \"right\": endLeft,\r\n          \"bottom\": endTop + config.ctlElemHeight\r\n        });\r\n\r\n        _clip.setSliderByClip({\r\n          \"target\": \"start\",\r\n          \"startTop\": startTop,\r\n          \"endTop\": endTop\r\n        });\r\n\r\n        _clip.setClipInfo();\r\n        _clip.updateElemPos();\r\n        _clip.setSliderTime();\r\n        window.startTime = config.clipStartTime; // By hanxiang\r\n        window.endTime = config.clipEndTime; // By hanxiang\r\n//        _clip.getFragmentUrl(config.clipStartTime, config.clipEndTime);\r\n      }\r\n\r\n      body.off('mouseup', bodyMouseup);\r\n    }\r\n\r\n  };\r\n\r\n  //开始杆元素事件\r\n  _proto.startElemEvent = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    var start = _clip.startElem;\r\n    //鼠标按下时开始元素的定位top\r\n    var startTop = 0;\r\n    var startLeft = 0;\r\n    var endTop = 0;\r\n    var endLeft = 0;\r\n    var scrollTop = 0;\r\n\r\n    start.click(function (e) {\r\n      e.stopPropagation();\r\n    });\r\n\r\n    start.mousedown(function (e) {\r\n      var startData = _clip.mousedown({\r\n        \"target\": \"start\",\r\n        \"X\": e.pageX,\r\n        \"Y\": e.pageY\r\n      });\r\n\r\n      startTop = startData.top;\r\n      startLeft = startData.left;\r\n      endTop = startData.otherTop;\r\n      endLeft = startData.otherLeft;\r\n      scrollTop = startData.scrollTop;\r\n    });\r\n\r\n    $('body').mousemove(function (e) {\r\n      if (_clip.startElemActive) {\r\n        _clip.mousemove({\r\n          \"target\": \"start\",\r\n          \"elemTop\": startTop,\r\n          \"elemLeft\": startLeft,\r\n          \"otherTop\": endTop,\r\n          \"otherLeft\": endLeft,\r\n          \"X\": e.pageX,\r\n          \"Y\": e.pageY,\r\n          \"scrollTop\": scrollTop\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  //结束杆元素事件\r\n  _proto.endElemEvent = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    var end = _clip.endElem;\r\n    //鼠标按下时开始元素的定位top\r\n    var startTop = 0;\r\n    var startLeft = 0;\r\n    var endTop = 0;\r\n    var endLeft = 0;\r\n    var scrollTop = 0;\r\n\r\n    end.click(function (e) {\r\n      e.stopPropagation();\r\n    });\r\n\r\n    end.mousedown(function (e) {\r\n      var startData = _clip.mousedown({\r\n        \"target\": \"end\",\r\n        \"X\": e.pageX,\r\n        \"Y\": e.pageY\r\n      });\r\n\r\n      startTop = startData.otherTop;\r\n      startLeft = startData.otherLeft;\r\n      endTop = startData.top;\r\n      endLeft = startData.left;\r\n      scrollTop = startData.scrollTop;\r\n    });\r\n\r\n    $('body').mousemove(function (e) {\r\n      if (_clip.endElemActive) {\r\n        _clip.mousemove({\r\n          \"target\": \"end\",\r\n          \"elemTop\": endTop,\r\n          \"elemLeft\": endLeft,\r\n          \"otherTop\": startTop,\r\n          \"otherLeft\": startLeft,\r\n          \"X\": e.pageX,\r\n          \"Y\": e.pageY,\r\n          \"scrollTop\": scrollTop\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  //杆 鼠标按下事件\r\n  _proto.mousedown = function (cfg) {\r\n    var _clip = this;\r\n\r\n    _clip.setLimit();\r\n\r\n    //清除用鼠标选择的文本高亮色\r\n    _clip.clearWinSelection();\r\n\r\n    //被拖动的元素\r\n    var targetElem = null;\r\n    //另外一个元素\r\n    var otherElem = null;\r\n\r\n    $('body').addClass('disable-select-text');\r\n    _clip.ctlScrollObj.addClass('disable-select-text');\r\n\r\n    if (cfg.target == 'start') {\r\n      _clip.targetElem = targetElem = _clip.startElem;\r\n      otherElem = _clip.endElem;\r\n      _clip.startElemActive = true;\r\n\r\n    }\r\n    if (cfg.target == 'end') {\r\n      _clip.targetElem = targetElem = _clip.endElem;\r\n      otherElem = _clip.startElem;\r\n      _clip.endElemActive = true;\r\n    }\r\n\r\n    //元素的原始X坐标\r\n    _clip.config.originalX = cfg.X;\r\n    //元素的原始Y坐标\r\n    _clip.config.originalY = cfg.Y;\r\n\r\n    return {\r\n      \"top\": targetElem.position().top,\r\n      \"left\": targetElem.position().left,\r\n      \"otherTop\": otherElem.position().top,\r\n      \"otherLeft\": otherElem.position().left,\r\n      \"scrollTop\": _clip.ctlScrollObj.scrollTop()\r\n    };\r\n  };\r\n\r\n  //杆 鼠标移动事件\r\n  _proto.mousemove = function (cfg) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    //被拖动的元素\r\n    var targetElem = null;\r\n    //另外一个元素\r\n    var otherElem = null;\r\n    //拖动范围\r\n    var minL = 16 - config.ctlElemWidth;\r\n    var minT = 0;\r\n    var maxL = 0;\r\n    var maxT = 0;\r\n\r\n    var subTop = 0;\r\n    var subLeft = 0;\r\n    var subRight = 0;\r\n    var subBottom = 0;\r\n\r\n    _clip.addMask();\r\n\r\n    //针对webkit核心，拖动时仍然会导致滚动条滚动，要算上滚动前后的高度差\r\n    var top = cfg.elemTop + (cfg.Y - config.originalY) + (_clip.ctlScrollObj.scrollTop() - cfg.scrollTop);\r\n    var left = cfg.elemLeft + (cfg.X - config.originalX);\r\n\r\n    if (cfg.target == 'start') {\r\n      targetElem = _clip.startElem;\r\n      otherElem = _clip.endElem;\r\n\r\n      //minL = 4;\r\n      minT = 10;\r\n      maxL = _clip.ctlObjBoxWidth - config.ctlElemWidth + 16;\r\n      maxT = cfg.otherTop;\r\n\r\n      top = Math.floor(top / config.lineHeight) * config.lineHeight + 10;\r\n      if (left > (cfg.otherLeft - config.ctlElemWidth) && top > (maxT - config.ctlElemHeight)) {\r\n        top = maxT - config.ctlElemHeight;\r\n      }\r\n      if (top < minT) {\r\n        top = minT;\r\n      }\r\n      if (top > maxT) {\r\n        top = maxT\r\n      }\r\n\r\n      if (top >= cfg.otherTop && left > (cfg.otherLeft - config.ctlElemWidth)) {\r\n        left = cfg.otherLeft - config.ctlElemWidth;\r\n      }\r\n      if (left < minL) {\r\n        left = minL;\r\n      }\r\n      if (left > maxL) {\r\n        left = maxL;\r\n      }\r\n\r\n      //设置被选的字幕相关参数\r\n      subTop = top;\r\n      subLeft = left + config.ctlElemWidth;\r\n      subRight = cfg.otherLeft;\r\n      subBottom = cfg.otherTop + config.ctlElemHeight;\r\n\r\n      _clip.setSliderByClip({\r\n        \"target\": \"start\",\r\n        \"startTop\": top,\r\n        \"endTop\": cfg.otherTop\r\n      });\r\n    }\r\n\r\n    if (cfg.target == 'end') {\r\n      targetElem = _clip.endElem;\r\n      otherElem = _clip.startElem;\r\n\r\n      minT = cfg.otherTop;\r\n      maxT = _clip.ctlObjBoxHeight - config.ctlElemHeight + 10;\r\n      maxL = _clip.ctlObjBoxWidth + 16;\r\n\r\n      top = Math.floor(top / config.lineHeight) * config.lineHeight + 10;\r\n      if (left < (cfg.otherLeft + config.ctlElemWidth) && top < (minT + config.ctlElemHeight)) {\r\n        top = minT + config.ctlElemHeight;\r\n      }\r\n      if (top > maxT) {\r\n        top = maxT;\r\n      }\r\n      if (top < minT) {\r\n        top = minT;\r\n      }\r\n\r\n      if (top <= cfg.otherTop && left < (cfg.otherLeft + config.ctlElemWidth)) {\r\n        left = cfg.otherLeft + config.ctlElemWidth;\r\n      }\r\n      if (left > maxL) {\r\n        left = maxL;\r\n      }\r\n      if (left < minL) {\r\n        left = minL;\r\n      }\r\n\r\n      //设置被选的字幕相关参数\r\n      subTop = cfg.otherTop;\r\n      subLeft = cfg.otherLeft + config.ctlElemWidth;\r\n      subRight = left;\r\n      subBottom = top + config.ctlElemHeight;\r\n\r\n      _clip.setSliderByClip({\r\n        \"target\": \"end\",\r\n        \"startTop\": cfg.otherTop,\r\n        \"endTop\": top\r\n      });\r\n    }\r\n\r\n    targetElem.css({\"left\": left, \"top\": top});\r\n\r\n    //设置被选的字幕\r\n    _clip.setSelected({\r\n      \"top\": subTop,\r\n      \"left\": subLeft,\r\n      \"right\": subRight,\r\n      \"bottom\": subBottom\r\n    });\r\n\r\n    _clip.setClipInfo();\r\n    _clip.setSliderTime();\r\n  };\r\n\r\n  //鼠标放开事件\r\n  _proto.mouseup = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n    var $body = $('body');\r\n\r\n    $body.mouseup(function () {\r\n      if (_clip.startElemActive || _clip.endElemActive || _clip.sliderBar.startActive || _clip.sliderBar.endActive) {\r\n        //设置开始杆非激活\r\n        if (_clip.startElemActive) {\r\n          _clip.startElemActive = false;\r\n        }\r\n        //设置结束杆非激活\r\n        if (_clip.endElemActive) {\r\n          _clip.endElemActive = false;\r\n        }\r\n        //设置开始滑块非激活\r\n        if (_clip.sliderBar.startActive) {\r\n          _clip.sliderBar.startActive = false;\r\n        }\r\n        //设置结束滑块非激活\r\n        if (_clip.sliderBar.endActive) {\r\n          _clip.sliderBar.endActive = false;\r\n        }\r\n\r\n        //取消 各种屏蔽拖动操作时的选择文字手段\r\n        $body.removeClass('disable-select-text');\r\n        _clip.ctlScrollObj.removeClass('disable-select-text');\r\n        _clip.delMask();\r\n        //更新选择杆的定位位置，贴近所选的文字边缘\r\n        _clip.updateElemPos();\r\n\r\n        window.startTime = config.clipStartTime; // By hanxiang\r\n        window.endTime = config.clipEndTime; // By hanxiang\r\n//        _clip.getFragmentUrl(config.clipStartTime, config.clipEndTime);\r\n      }\r\n    });\r\n  };\r\n\r\n  //根据选择杆的定位设置拖动滑块\r\n  _proto.setSliderByClip = function (cfg) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n    var sliderBar = _clip.sliderBar;\r\n    var start = sliderBar.start;\r\n    var end = sliderBar.end;\r\n\r\n    var boxHeight = _clip.ctlObjBoxHeight - config.lineHeight;\r\n    //滑块定位top极限值\r\n    var startMinL = -sliderBar.ctlWidth;\r\n    var startLeft = sliderBar.barWidth * (cfg.startTop - 10) / boxHeight - sliderBar.ctlWidth;\r\n    startLeft = startLeft < startMinL ? startMinL : startLeft;\r\n\r\n    start.css({'left': startLeft});\r\n\r\n    var endMaxL = sliderBar.barWidth;\r\n    var endLeft = sliderBar.barWidth * (cfg.endTop - 10) / boxHeight;\r\n    endLeft = endLeft > endMaxL ? endMaxL : endLeft;\r\n    end.css({'left': endLeft});\r\n\r\n    _clip.setSliderRange(startLeft + sliderBar.ctlWidth, endLeft - startLeft - sliderBar.ctlWidth);\r\n\r\n  };\r\n\r\n  //开始滑块元素事件\r\n  _proto.sliderStartEvent = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    var startCtl = _clip.sliderBar.startCtl;\r\n    //鼠标按下时开始元素的定位top\r\n    var startLeft = 0;\r\n    var endLeft = 0;\r\n\r\n    startCtl.click(function () {\r\n      _clip.ctlScrollObj.scrollTop(_clip.startElem.position().top - config.lineHeight * 2);\r\n    });\r\n\r\n    startCtl.mousedown(function (e) {\r\n      var startData = _clip.sliderMousedown({\r\n        \"target\": \"start\",\r\n        \"X\": e.pageX\r\n      });\r\n\r\n      startLeft = startData.left;\r\n      endLeft = startData.otherLeft;\r\n    });\r\n\r\n    $('body').mousemove(function (e) {\r\n      if (_clip.sliderBar.startActive) {\r\n        _clip.sliderMousemove({\r\n          \"target\": \"start\",\r\n          \"elemLeft\": startLeft,\r\n          \"otherLeft\": endLeft,\r\n          \"X\": e.pageX\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  //结束滑块元素事件\r\n  _proto.sliderEndEvent = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    var endCtl = _clip.sliderBar.endCtl;\r\n    var startLeft = 0;\r\n    var endLeft = 0;\r\n\r\n    endCtl.click(function () {\r\n      _clip.ctlScrollObj.scrollTop(_clip.endElem.position().top - config.lineHeight * 8);\r\n    });\r\n\r\n    endCtl.mousedown(function (e) {\r\n      var startData = _clip.sliderMousedown({\r\n        \"target\": \"end\",\r\n        \"X\": e.pageX\r\n      });\r\n\r\n      startLeft = startData.otherLeft;\r\n      endLeft = startData.left;\r\n    });\r\n\r\n    $('body').mousemove(function (e) {\r\n      if (_clip.sliderBar.endActive) {\r\n        _clip.sliderMousemove({\r\n          \"target\": \"end\",\r\n          \"elemLeft\": endLeft,\r\n          \"otherLeft\": startLeft,\r\n          \"X\": e.pageX\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  //滑块元素鼠标按下事件\r\n  _proto.sliderMousedown = function (cfg) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n    var sliderBar = _clip.sliderBar;\r\n\r\n    _clip.setLimit();\r\n\r\n    //清除用鼠标选择的文本高亮色\r\n    _clip.clearWinSelection();\r\n\r\n    //被拖动的元素\r\n    var targetElem = null;\r\n    //另外一个元素\r\n    var otherElem = null;\r\n\r\n    $('body').addClass('disable-select-text');\r\n    _clip.ctlScrollObj.addClass('disable-select-text');\r\n\r\n    if (cfg.target == 'start') {\r\n      targetElem = sliderBar.start;\r\n      otherElem = sliderBar.end;\r\n      sliderBar.startActive = true;\r\n\r\n    }\r\n    if (cfg.target == 'end') {\r\n      targetElem = sliderBar.end;\r\n      otherElem = sliderBar.start;\r\n      sliderBar.endActive = true;\r\n    }\r\n\r\n    //元素的原始X坐标\r\n    _clip.config.originalX = cfg.X;\r\n\r\n    return {\r\n      \"left\": targetElem.position().left,\r\n      \"otherLeft\": otherElem.position().left\r\n    };\r\n  };\r\n\r\n  //滑块元素鼠标拖动事件\r\n  _proto.sliderMousemove = function (cfg) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n    var sliderBar = _clip.sliderBar;\r\n\r\n    //被拖动的元素\r\n    var targetElem = null;\r\n\r\n    var startMinL = -sliderBar.ctlWidth;\r\n    var endMaxL = sliderBar.barWidth;\r\n\r\n    var left = cfg.elemLeft + (cfg.X - config.originalX);\r\n\r\n    if (cfg.target == 'start') {\r\n      targetElem = sliderBar.start;\r\n\r\n      var startMaxL = cfg.otherLeft - sliderBar.ctlWidth;\r\n\r\n      if (left < startMinL) {\r\n        left = startMinL;\r\n      }\r\n      if (left > startMaxL) {\r\n        left = startMaxL;\r\n      }\r\n      //设置所选范围条\r\n      _clip.setSliderRange(left + sliderBar.ctlWidth, cfg.otherLeft - left);\r\n      _clip.setClipBySlider({\r\n        \"target\": \"start\",\r\n        \"startLeft\": left,\r\n        \"endLeft\": cfg.otherLeft\r\n      });\r\n\r\n    } else if (cfg.target == 'end') {\r\n      targetElem = sliderBar.end;\r\n\r\n      var endMinL = cfg.otherLeft + sliderBar.ctlWidth;\r\n      if (left < endMinL) {\r\n        left = endMinL;\r\n      }\r\n      if (left > endMaxL) {\r\n        left = endMaxL;\r\n      }\r\n      //设置所选范围条\r\n      _clip.setSliderRange(cfg.otherLeft + sliderBar.ctlWidth, left - cfg.otherLeft);\r\n      _clip.setClipBySlider({\r\n        \"target\": \"end\",\r\n        \"startLeft\": cfg.otherLeft,\r\n        \"endLeft\": left\r\n      });\r\n    }\r\n\r\n    targetElem.css({'left': left});\r\n\r\n    _clip.setClipInfo();\r\n    _clip.setSliderTime();\r\n  };\r\n\r\n  //设置滑块所选范围条\r\n  _proto.setSliderRange = function (left, width) {\r\n    var _clip = this;\r\n\r\n    _clip.sliderBar.rangeElem.css({'left': left, 'width': width});\r\n  };\r\n\r\n  //根据拖动滑块的定位设置选择杆\r\n  _proto.setClipBySlider = function (cfg) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n    var sliderBar = _clip.sliderBar;\r\n\r\n    var boxHeight = _clip.ctlObjBoxHeight - config.lineHeight;\r\n\r\n    //选择杆定位top最大值\r\n    var maxTop = _clip.ctlObjBoxHeight - config.ctlElemHeight + 10;\r\n    //开始杆top\r\n    var clipStartTop = boxHeight * ((cfg.startLeft + sliderBar.ctlWidth) / sliderBar.barWidth) + 10;\r\n    //clipStartTop = clipStartTop > maxTop ? maxTop : clipStartTop;\r\n    clipStartTop = Math.floor(clipStartTop / config.lineHeight) * config.lineHeight + 10;\r\n    //开始杆left\r\n    var clipStartLeft = 16 - config.ctlElemWidth;\r\n    //结束杆top\r\n    var clipEndTop = boxHeight * ((cfg.endLeft) / sliderBar.barWidth) + 10;\r\n    //clipEndTop = clipEndTop > maxTop ? maxTop : clipEndTop;\r\n    clipEndTop = Math.floor(clipEndTop / config.lineHeight) * config.lineHeight + 10;\r\n    //结束杆left\r\n    var clipEndLeft = _clip.ctlObjBoxWidth + 16;\r\n\r\n    _clip.startElem.css({\"top\": clipStartTop, \"left\": clipStartLeft});\r\n    _clip.endElem.css({\"top\": clipEndTop, \"left\": clipEndLeft});\r\n\r\n    _clip.setSelected({\r\n      \"top\": clipStartTop,\r\n      \"left\": clipStartLeft + config.ctlElemWidth,\r\n      \"right\": clipEndLeft,\r\n      \"bottom\": clipEndTop + config.ctlElemHeight\r\n    });\r\n\r\n    if (cfg.target == 'start') {\r\n      _clip.ctlScrollObj.scrollTop(clipStartTop - config.lineHeight * 2);\r\n    } else if (cfg.target == 'end') {\r\n      _clip.ctlScrollObj.scrollTop(clipEndTop - config.lineHeight * 8);\r\n    }\r\n  };\r\n\r\n  //设置拖动滑块的两个时间\r\n  _proto.setSliderTime = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n    var sliderBar = _clip.sliderBar;\r\n\r\n    if (config.clipStartTime != undefined) {\r\n      sliderBar.stElem.time.text(_clip.getTipsTime(config.clipStartTime));\r\n      sliderBar.etElem.time.text(_clip.getTipsTime(config.clipEndTime));\r\n\r\n      sliderBar.stElem.removeClass('hidden');\r\n      sliderBar.etElem.removeClass('hidden');\r\n    } else {\r\n      sliderBar.stElem.addClass('hidden');\r\n      sliderBar.etElem.addClass('hidden');\r\n    }\r\n\r\n  };\r\n\r\n  //拖动滑块时在整个网页上添加一个层防止文字内容等因为鼠标的拖动被选中\r\n  _proto.addMask = function (p) {\r\n    var _clip = this;\r\n\r\n    if (!_clip.mask) {\r\n      _clip.mask = $('<div class=\"clip-mask\" onselectstart=\"return false;\"></div>').appendTo($('body'));\r\n    }\r\n  };\r\n\r\n  _proto.delMask = function (p) {\r\n    var _clip = this;\r\n\r\n    if (_clip.mask) {\r\n      _clip.mask.remove();\r\n      _clip.mask = null;\r\n    }\r\n  };\r\n\r\n  //清除用鼠标选择的文本高亮色\r\n  _proto.clearWinSelection = function () {\r\n    if (window.getSelection) {\r\n      window.getSelection().removeAllRanges();\r\n    } else {\r\n      document.selection.empty();\r\n    }\r\n  };\r\n\r\n  //将时间转成3'40\"的形式\r\n  _proto.getTipsTime = function (t) {\r\n    var _clip = this;\r\n\r\n    t = Math.floor(t);\r\n    var m = Math.floor(t / 60);\r\n    var s = t - m * 60;\r\n    return m + '\\' ' + s + '\"';\r\n  };\r\n\r\n  _proto.setSubtitleLine = function (data, player) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    if (!data) {\r\n      alert('Subtitle loading.');\r\n      _clip.destroy();\r\n    } else {\r\n      _clip.player = player;\r\n      //设置不能点词播放\r\n      _clip.player.config.wordClickEvent = false;\r\n      //停止字幕自动滚动\r\n      _clip.stopAutoScroll();\r\n\r\n      _clip.subtitleLine = data;\r\n      var len = _clip.subtitleLine.length;\r\n      for (var i = 0; i < len; i++) {\r\n        var line = _clip.subtitleLine.eq(i);\r\n        line.data('top', line.position().top).attr('top', line.position().top);\r\n      }\r\n\r\n      if (config.currentLine == undefined) {\r\n        _clip.setCtlPos(0);\r\n      } else {\r\n        _clip.setCtlPos(config.currentLine);\r\n      }\r\n    }\r\n\r\n  };\r\n\r\n  //设置元素初始定位值\r\n  _proto.setCtlPos = function (index) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    _clip.setLimit();\r\n\r\n    var line = _clip.subtitleLine.eq(index);\r\n    var nextLine = null;\r\n    var len = _clip.subtitleLine.length;\r\n    var lineTemp = len - 1 - index;\r\n\r\n    if (lineTemp >= 4) {\r\n      nextLine = _clip.subtitleLine.eq(index + 4);\r\n    } else {\r\n      nextLine = _clip.subtitleLine.eq(index + lineTemp);\r\n    }\r\n    var startTop = parseFloat(line.attr('top'));\r\n    var endTop = parseFloat(nextLine.attr('top'));\r\n    var startLeft = 16 - config.ctlElemWidth;\r\n    var endLeft = line.width() + 16;\r\n\r\n    _clip.startElem.css({\"top\": startTop, \"left\": startLeft}).removeClass('hidden');\r\n    _clip.endElem.css({\"top\": endTop, \"left\": endLeft}).removeClass('hidden');\r\n\r\n    //设置被选的字幕\r\n    _clip.setSelected({\r\n      \"top\": startTop,\r\n      \"left\": startLeft + config.ctlElemWidth,\r\n      \"right\": endLeft,\r\n      \"bottom\": endTop + config.ctlElemHeight\r\n    });\r\n\r\n    _clip.setClipInfo();\r\n    _clip.updateElemPos();\r\n\r\n    _clip.setSliderByClip({\r\n      \"target\": \"start\",\r\n      \"startTop\": startTop,\r\n      \"endTop\": endTop\r\n    });\r\n    _clip.setSliderTime();\r\n\r\n    window.startTime = config.clipStartTime; // By hanxiang\r\n    window.endTime = config.clipEndTime; // By hanxiang\r\n    _clip.getFragmentUrl(config.clipStartTime, config.clipEndTime);\r\n    //显示开始杆\r\n    _clip.ctlScrollObj.scrollTop(_clip.startElem.position().top - config.lineHeight * 2);\r\n  };\r\n\r\n  //设置字幕不滚动\r\n  _proto.stopAutoScroll = function () {\r\n    var _clip = this;\r\n    var player = _clip.player;\r\n\r\n    if (player) {\r\n      player.config.isClipMode = true;\r\n    }\r\n  };\r\n\r\n  //设置字幕滚动\r\n  _proto.autoScroll = function () {\r\n    var _clip = this;\r\n    var player = _clip.player;\r\n\r\n    if (player) {\r\n      player.config.isClipMode = false;\r\n    }\r\n  };\r\n\r\n  //设置被选择的字幕。cfg Object {top, left, right, bottom}\r\n  _proto.setSelected = function (cfg) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n    var startLine = null;\r\n    var startWord = null;\r\n    var startWordInLineIndex = -1;\r\n    var endLine = null;\r\n    var endWord = null;\r\n\r\n    var len = _clip.subtitleLine.length;\r\n    for (var i = 0; i < len; i++) {\r\n      var line = _clip.subtitleLine.eq(i);\r\n      var lineTop = parseFloat(line.attr('top'));\r\n      startLine = line;\r\n\r\n      line.removeClass('selected-line');\r\n      line.find('.word').removeClass('selected-word');\r\n      line.find('.space').removeClass('selected-space');\r\n\r\n      if (cfg.top >= lineTop && cfg.top < (lineTop + line.height())) {\r\n        line.addClass('selected-line');\r\n\r\n        var lineWord = line.find('.word');\r\n        var lineWordLen = lineWord.length;\r\n\r\n        for (var j = 0; j < lineWordLen; j++) {\r\n          var word = lineWord.eq(j);\r\n          var wordTop = word.position().top;\r\n          var wordLeft = word.position().left;\r\n\r\n\r\n          if (cfg.top >= wordTop && cfg.top < (wordTop + word.height()) && cfg.left >= wordLeft && cfg.left < (wordLeft + word.width())) {\r\n            startWord = word;\r\n            startWordInLineIndex = j;\r\n          }\r\n\r\n          if (startWord != null) {\r\n            word.addClass('selected-word');\r\n            word.next('.space').addClass('selected-space');\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (i = parseFloat(startLine.attr('index')); i < len; i++) {\r\n      line = _clip.subtitleLine.eq(i);\r\n      lineTop = parseFloat(line.attr('top'));\r\n\r\n      //找到结束所在的行\r\n      if (cfg.bottom > lineTop && cfg.bottom <= (lineTop + line.height())) {\r\n        endLine = line;\r\n        lineWord = line.find('.word');\r\n        lineWordLen = lineWord.length;\r\n\r\n        //如果结束杆和开始杆在同一行\r\n        if (parseFloat(endLine.attr('index')) == parseFloat(startLine.attr('index'))) {\r\n          if (startWord != null) {\r\n            for (j = startWordInLineIndex; j < lineWordLen; j++) {\r\n              word = lineWord.eq(j);\r\n              wordTop = word.position().top;\r\n              wordLeft = word.position().left;\r\n\r\n              if (cfg.bottom > wordTop && cfg.bottom <= (wordTop + word.height()) && cfg.right >= wordLeft && cfg.right < (wordLeft + word.width())) {\r\n                endWord = word;\r\n              }\r\n\r\n              if (endWord != null) {\r\n                word.removeClass('selected-word');\r\n                word.next('.space').removeClass('selected-space');\r\n              }\r\n            }\r\n          }\r\n        }\r\n        //如果开始和结束不在同一行\r\n        else {\r\n          for (j = 0; j < lineWordLen; j++) {\r\n            word = lineWord.eq(j);\r\n            wordTop = word.position().top;\r\n            wordLeft = word.position().left;\r\n            word.addClass('selected-word');\r\n            word.next('.space').addClass('selected-space');\r\n\r\n            if (cfg.bottom > wordTop && cfg.bottom <= (wordTop + word.height()) && cfg.right >= wordLeft && cfg.right < (wordLeft + word.width())) {\r\n              endWord = word;\r\n            }\r\n\r\n            if (endWord != null) {\r\n              word.removeClass('selected-word');\r\n              word.next('.space').removeClass('selected-space');\r\n            }\r\n          }\r\n        }\r\n      } else if (i != parseFloat(startLine.attr('index'))) {\r\n        if (endLine == null) {\r\n          line.addClass('selected-line');\r\n          line.find('.word').addClass('selected-word');\r\n          line.find('.space').addClass('selected-space');\r\n        } else {\r\n          line.removeClass('selected-line');\r\n          line.find('.word').removeClass('selected-word');\r\n          line.find('.space').removeClass('selected-space');\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  //修正开始、结束杆的定位，以贴近所选择的字\r\n  _proto.updateElemPos = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    var len = _clip.selectedWords.length;\r\n\r\n    if (len > 0) {\r\n      var startSelected = _clip.selectedWords.eq(0);\r\n      var startLeft = startSelected.position().left - config.ctlElemWidth;\r\n      var startTop = startSelected.position().top;\r\n\r\n      var endSelected = _clip.selectedWords.eq(len - 1);\r\n      var endLeft = endSelected.position().left + endSelected.width();\r\n      var endTop = endSelected.position().top;\r\n\r\n      _clip.startElem.css({'left': startLeft, 'top': startTop});\r\n      _clip.endElem.css({'left': endLeft, 'top': endTop});\r\n\r\n      _clip.setSliderByClip({\r\n        \"target\": \"start\",\r\n        \"startTop\": startTop,\r\n        \"endTop\": endTop\r\n      });\r\n    }\r\n  };\r\n\r\n  //设置所选择部分的各种信息\r\n  _proto.setClipInfo = function () {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    _clip.selectedWords = _clip.ctlScrollObj.find('.selected-word');\r\n    var len = _clip.selectedWords.length;\r\n    config.clipStartTime = _clip.selectedWords.eq(0).attr('st');\r\n    config.clipEndTime = _clip.selectedWords.eq(len - 1).attr('et');\r\n\r\n    _clip.setClipTimeElem(Math.floor(config.clipEndTime) - Math.floor(config.clipStartTime));\r\n  };\r\n\r\n  //设置显示碎片时长\r\n  _proto.setClipTimeElem = function (t) {\r\n    var _clip = this;\r\n\r\n    _clip.clipTimeElem.text(_proto.getTipsTime(t));\r\n  };\r\n\r\n  //碎片分享地址\r\n  _proto.getFragmentUrl = function (st, et) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    // var url = '/fragment/create/' + JLib.config.playerGUID + '?st=' + st + '&et=' + et;\r\n    var url = '/fragment/getWithPlayIdAndStEt?playid=' + JLib.config.playid + '&st=' + st + '&et=' + et;\r\n    $.get(url, {},\r\n      function (data) {\r\n        data = stringToJSON(data);\r\n        //成功\r\n        if (data.status == 1) {\r\n          config.shareUrl = JLib.config.hostname + '/play/' + data.fragment_playid;\r\n          JLib.config.fragment_guid = data.fragment_guid;\r\n          JLib.config.fragment_playid = data.fragment_playid;\r\n        }\r\n        //失败\r\n        else {\r\n          alert(data.message);\r\n        }\r\n      }).fail(function () {\r\n        //alert('Sorry! System busy. Please retry later.');\r\n      });\r\n  };\r\n\r\n  //视频预览\r\n  _proto.clipPreview = function (st, et) {\r\n    var _clip = this;\r\n    var config = _clip.config;\r\n\r\n    //暂停原视频\r\n    if (_clip.player) {\r\n      _clip.player.pause();\r\n    }\r\n\r\n    console.log(_clip.previewIframe);\r\n    _clip.previewIframe[0].src = '';\r\n\r\n    var url = '/review?guid=' + JLib.config.playerGUID + '&st=' + st + '&et=' + et;\r\n    //var url = '/static/source_demo/json/play_sewise_preview.json';\r\n\r\n    _clip.previewCont.removeClass('hidden');\r\n    _clip.previewIframe[0].src = url;\r\n\r\n    //var iframeDoc = _clip.previewIframe[0].contentDocument || _clip.previewIframe[0].contentWindow.document;\r\n\r\n    /*$.get(url, {},\r\n     function(data){\r\n     data = stringToJSON(data);\r\n\r\n     loading.addClass('hidden');\r\n     if (status >= 0){\r\n     _clip.previewIframe[0].src = data.url;\r\n     } else {\r\n     console.log(data);\r\n     }\r\n     }).fail(function(){\r\n     //alert('Sorry! System busy. Please retry later.');\r\n     });*/\r\n\r\n\r\n  };\r\n\r\n  function stringToJSON(data){\r\n      if (typeof data != 'object'){\r\n          return $.parseJSON(data);\r\n      } else {\r\n          return data;\r\n      }\r\n  };\r\n\r\n  function setShareSummary(e, title, from){\r\n    var target = $(e.target);\r\n    jiathis_config.summary =  ' 我在swufe上剪辑了一段“' + title + '”的视频，快来看看吧。@autotiming';\r\n  }\r\n\r\n  return {\r\n    clipShare: clipCtl\r\n  };\r\n\r\n\r\n});\r\n\r\n\r\n\n","require(['config'], function(){\r\n  require(['infrastructure'], function(){\r\n    require(['blockui', 'sewisecontrol', 'clip'], function(blockUI, sewiseControl, clip){\r\n\r\n      var $playerHolder = $('#playerHolder'),\r\n        $addToNoteDialog = $('#addToNoteDialog'),\r\n        $createNoteBookButton = $addToNoteDialog.find('#createNoteBookButton'),\r\n        $createNewPlaylist = $('#createNewPlaylist'),\r\n        videoInfo = $playerHolder.data();\r\n\r\n      window.JLib = window.JLib || {};\r\n      JLib.config = JLib.config || {};\r\n      // JLib.config.pageName = 'play';\r\n      if(videoInfo.videotype === 'fragment'){\r\n        JLib.config.playerJSON = '/subtitle/fragment?video_playid=' + videoInfo.videoplayid + '&st=' + videoInfo.starttime + '&et=' + videoInfo.endtime + '&language=' + videoInfo.language + '&type=json&version=2';\r\n      }else{\r\n        JLib.config.playerJSON = '/subtitle?video_guid=' + videoInfo.guid + '&language=' + videoInfo.language + '&type=json&version=2';\r\n      }\r\n      JLib.config.playerGUID = videoInfo.guid;\r\n      JLib.config.playid = videoInfo.playid;\r\n      JLib.config.hostname = window.location.origin;\r\n      JLib.config.userId = videoInfo.userId;\r\n      JLib.config.videoId = videoInfo.guid;\r\n      JLib.config.fragmentId = \"0\";\r\n\r\n      window.jiathis_config = {\r\n          url: window.location.href,\r\n          title: $('title').text(),\r\n          summary: \"I have a new video clip on Swufe, everyone to watch. @Autotiming\",\r\n          pic: window.location.origin + '/vi/' + videoInfo.guid,\r\n          shortUrl: false,\r\n          hideMore: false\r\n      }\r\n\r\n      // tags\r\n      var $tags = $('.tab a'),\r\n        $tabs = $('.tab-content');\r\n      $tags.click(function(){\r\n        var index = $tags.index(this),\r\n          $this = $(this);\r\n        if(!$this.hasClass('disable')){\r\n          $tags.removeClass('current');\r\n          $this.addClass('current');\r\n          $tabs.hide().eq(index).show();\r\n        }\r\n        return false;\r\n      });\r\n\r\n      // shrink\r\n      var $container = $('.player-container');\r\n      $('.shrink-btn a').click(function(){\r\n        $container.toggleClass('shrinked');\r\n        return false;\r\n      });\r\n\r\n      sewiseControl.load('playerHolder', function(){\r\n        SewisePlayer.setup({\r\n          server: 'vod',\r\n          videourl: videoInfo.resourceflv,\r\n          title: videoInfo.title,\r\n          skin: 'vodWhite',\r\n          logo: '/blank',\r\n          playername: ' ',\r\n          copyright: ' '\r\n        });\r\n\r\n\r\n        //搜索高亮\r\n        var subtitleSearchForm = $('#subtitle_search');\r\n        var subtitleInput = subtitleSearchForm.find('.input');\r\n        var originSubtitleCol = $('#subtitle');\r\n        var subtitleCont = originSubtitleCol.find('.subtitle-content');\r\n        var subtitleBox = originSubtitleCol.find('.subtitle-box');\r\n        var subtitleBoxHeight = 0;\r\n        var searchNum = 0;\r\n        var numElem = $('<span class=\"key-count\"></span>').appendTo(subtitleSearchForm);\r\n        //标搜索的词所在的位置\r\n        var keywordPos = originSubtitleCol.find('#keyword_pos');\r\n        var keywordPosWidth = keywordPos.width();\r\n\r\n        //鼠标表单提交（如果设置input失去焦点时提交在chrome和ff下会有各自的bug）\r\n        subtitleSearchForm.submit(function (e) {\r\n          e.preventDefault();\r\n\r\n          setHighlightWord($.trim(subtitleInput.val()), 'searchInput');\r\n        });\r\n\r\n        function setHighlightWord(keyword, from) {\r\n          //console.log('setHighlightWord');\r\n          searchNum = 0;\r\n\r\n          var hl = subtitleCont.find('.hl-cont');\r\n          hl.each(function () {\r\n            var _self = $(this);\r\n            _self.children().insertAfter(_self);\r\n            _self.remove();\r\n          });\r\n          keywordPos.empty();\r\n\r\n          if (keyword == '') {\r\n            numElem.text('');\r\n          } else {\r\n            clearWinSelection();\r\n\r\n            if (window.find) {\r\n              //console.log('window.find');\r\n              while (true) {\r\n                var check = window.find(keyword);\r\n\r\n                if (!check)\r\n                  break;\r\n\r\n                var sel = window.getSelection();\r\n\r\n                var start = sel.getRangeAt(0).startContainer.parentNode;\r\n                var end = sel.getRangeAt(0).endContainer.parentNode;\r\n\r\n                if (!$(start).hasClass('word') || !$(end).hasClass('word'))\r\n                  continue;\r\n\r\n                var p = $(start);\r\n                var next = start;\r\n                while (next != null && next != end) {\r\n                  p = p.add(next);\r\n                  next = next.nextSibling;\r\n                }\r\n                p = p.add(end);\r\n                p.wrapAll('<i class=\"hl-cont hl-word\"></i>');\r\n\r\n                searchNum++;\r\n\r\n                setKeywordPos({\r\n                  \"elem\": $(start),\r\n                  \"cont\": keywordPos,\r\n                  \"contWidth\": keywordPosWidth,\r\n                  \"subtitleBox\": subtitleBox\r\n                });\r\n              }\r\n            } else if (document.body.createTextRange) {\r\n              //console.log('createTextRange');\r\n              var range = document.body.createTextRange();\r\n\r\n              while (range.findText(keyword)) {\r\n                var start = $(range.parentElement());\r\n                if (start.hasClass('word')) {\r\n                  start.wrapAll('<i class=\"hl-cont hl-word\"></i>');\r\n                }\r\n                //折叠到终点\r\n                range.collapse(false);\r\n\r\n                searchNum++;\r\n\r\n                setKeywordPos({\r\n                  \"elem\": start,\r\n                  \"cont\": keywordPos,\r\n                  \"contWidth\": keywordPosWidth,\r\n                  \"subtitleBox\": subtitleBox\r\n                });\r\n              }\r\n            }\r\n\r\n            subtitleCont.scrollTop(0);\r\n            $(window).scrollTop(0);\r\n\r\n            clearWinSelection();\r\n\r\n            if (from == 'searchInput') {\r\n              if (searchNum == 0) {\r\n                numElem.text('未找到关键字');\r\n              } else if (searchNum == 1) {\r\n                numElem.text('找到 1 个关键字');\r\n              } else {\r\n                numElem.text('找到 ' + searchNum + ' 个关键字');\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        //设置关键词标识\r\n        function setKeywordPos(cfg) {\r\n          var top = parseFloat(cfg.elem.parents('.line').eq(0).position().top);\r\n          var elem = $('<span class=\"kw\"></span>').appendTo(cfg.cont);\r\n          subtitleBoxHeight = subtitleBoxHeight == 0 ? cfg.subtitleBox.height() : subtitleBoxHeight;\r\n          var left = top / subtitleBoxHeight * cfg.contWidth;\r\n          elem.css('left', left).attr('top', top);\r\n        }\r\n\r\n        //点击关键词标识跳转到相关关键词\r\n        keywordPos.on('click', '.kw', function (e) {\r\n          e.stopPropagation();\r\n\r\n          var top = $(this).attr('top');\r\n          subtitleCont.scrollTop(top);\r\n        });\r\n\r\n        var originPlayer = window.op = new sewiseControl.player();\r\n        var $originPlayer = $('#playerHolder');\r\n\r\n        var lineElemArray = null;\r\n\r\n        originPlayer.init({\r\n          \"videoElem\": $originPlayer,\r\n          \"subtitleElem\": originSubtitleCol,\r\n          \"srtJson\": JLib.config.playerJSON,\r\n          \"mod\": 'page',\r\n          //字幕加载完后回调\r\n          \"subtitleCallbackFunc\": function (data) {\r\n            lineElemArray = data;\r\n\r\n            //根据?k=helloworld\r\n            var matchSearch = (/(?:\\?|&)k\\=([^&]+)/g).exec(document.location.search);\r\n            if (matchSearch != null) {\r\n              setHighlightWord(decodeURIComponent(matchSearch[1].replace(/\\+/g, ' ')), 'searchPage');\r\n            }\r\n          }\r\n          /*,\r\n           //播放完成后回调\r\n           \"finishCallback\": function(){\r\n           playEndCont.removeClass('hidden');\r\n           }*/\r\n        });\r\n        //重播\r\n        /*btnReplay.click(function(e){\r\n         e.preventDefault();\r\n\r\n         playEndCont.addClass('hidden');\r\n         originPlayer.replay();\r\n         });*/\r\n\r\n        var originJiathisConfig = jiathis_config;\r\n        var shareTitle = jiathis_config.title;\r\n        jiathis_config.title = '#swufe#';\r\n\r\n        //分享\r\n        var videoShare = $('.video-share');\r\n        videoShare.on('mouseenter', '.jiathis_style_32x32 .jiathis_txt', function (e) {\r\n          jiathis_config = originJiathisConfig;\r\n          setShareSummary(e, shareTitle);\r\n        });\r\n\r\n        //分享\r\n        var btnClipShare = $('#btn_clip_share');\r\n        if (btnClipShare[0]) {\r\n          jiathis_config = {\r\n            url: originJiathisConfig.url,\r\n            title: originJiathisConfig.title,\r\n            summary: originJiathisConfig.summary,\r\n            pic: originJiathisConfig.pic,\r\n            shortUrl: false,\r\n            hideMore: false\r\n          };\r\n\r\n          btnClipShare.click(function (e) {\r\n            e.preventDefault();\r\n\r\n            clearWinSelection();\r\n\r\n            try{\r\n              originPlayer.pause();\r\n              var currentLine = originPlayer.getCurrentLineIndex();\r\n\r\n              var clipShare = new clip.clipShare();\r\n              clipShare.init({\r\n                \"container\": $('#origin_video_subtitle'),\r\n                \"lineHeight\": 24,\r\n                \"currentLine\": currentLine,\r\n                \"share\": {\"title\": shareTitle},\r\n                addShow: addShow\r\n              });\r\n              clipShare.setSubtitleLine(lineElemArray, originPlayer);\r\n            }catch(e){}\r\n          });\r\n        }\r\n\r\n        //播放完后\r\n        //焦点图\r\n        /*var focusPic = new jTools.focusPic({\r\n         \"focusEl\": $('#focus_pic'),\r\n         \"speed\": 3000,\r\n         \"showItemNum\": 4\r\n         });\r\n         focusPic.init();*/\r\n\r\n        //复制页面分享地址\r\n        /*jTools.copyToClip({\r\n          btn: $('#copy_origin_link'),\r\n          target: $('#origin_link'),\r\n          type: 'text',\r\n          afterCopy: function () {\r\n            alert('Copy succeed.');\r\n          }\r\n        });*/\r\n\r\n        //收藏\r\n        var favActiveClass = 'ico-fav-active';//已收藏\r\n        $('#ico_fav').click(function (e) {\r\n          e.preventDefault();\r\n          var _self = $(this);\r\n          var _self = $(this)\r\n\r\n          if(_self)\r\n          $.post('/favourite', {\"video_id\": JLib.config.videoId, \"fragment_id\": JLib.config.fragmentId},\r\n            function (data) {\r\n\r\n              if (data.status == 1) {\r\n                if (_self.hasClass(favActiveClass)) {\r\n                  _self.removeClass(favActiveClass);\r\n                } else {\r\n                  _self.addClass(favActiveClass);\r\n                }\r\n              } else {\r\n                alert(data.message);\r\n              }\r\n            }, 'json').fail(function () {\r\n              alert('Sorry! System busy. Please retry later.');\r\n            });\r\n        });\r\n\r\n        //评论\r\n       /* var commentList = $('#comment_list');\r\n        var commentMod = new comment.commentMod({\r\n          \"commentBox\": $('#comment_col .comment-box'),\r\n          \"listCont\": commentList,\r\n          \"player\": originPlayer,\r\n          \"videoId\": JLib.config.videoId,\r\n          \"fragmentId\": JLib.config.fragmentId\r\n        });\r\n        commentMod.init();*/\r\n      });\r\n\r\n      function clearWinSelection(){\r\n        if (window.getSelection){\r\n          window.getSelection().removeAllRanges();\r\n        } else {\r\n          document.selection.empty();\r\n        }\r\n      }\r\n\r\n      function setShareSummary(e, title, from){\r\n        var target = $(e.target);\r\n        jiathis_config.summary =  ' 我在swufe上剪辑了一段“' + title + '”的视频，快来看看吧。@autotiming';\r\n      }\r\n\r\n\r\n      /* 视频剪辑、笔记 */\r\n\r\n      function addShow(){\r\n        $.ajax({\r\n          'url':'/note/getMyNoteList',\r\n          'dataType': 'json',\r\n          'success':function(data){\r\n            if(data.msgCode != 0){\r\n              location.href = '/login';\r\n            }else{\r\n              if((len =data.list.length) !=0){\r\n                var html = '';\r\n                for(i=0;i<len;i++){\r\n                  html +='<option value=\"'+data.list[i]['id']+'\">'+data.list[i]['title']+'</option>';\r\n                }\r\n                // console.log(html);\r\n                $('#playlist_id').empty().append(html);\r\n              }\r\n              $addToNoteDialog.attr('class',' ').attr('class','modal-wrap');\r\n            }\r\n          },\r\n          'error':function(){\r\n            alert('服务异常，请稍后再试');\r\n          }\r\n        })\r\n        return false;\r\n      }\r\n\r\n      $('#addToNote').click(addShow);\r\n\r\n      $('#cloaseAddToNoteDialog').click(function(){\r\n        $addToNoteDialog.hide();\r\n        return false;\r\n      });\r\n\r\n      $('#addToNoteButton').click(function addInMyPlaylist(){\r\n\r\n        if(videoInfo.videotype !== 'fragment'){\r\n          //create fragment\r\n          var st = window.startTime;\r\n          var et = window.endTime;\r\n          var url = '/fragment/getWithPlayIdAndStEt/?playid=' + videoInfo.playid + '&st=' + st + '&et=' + et;\r\n          $.ajax({\r\n            type:\"GET\",\r\n            url:url,\r\n            async:false,//设置同步ajax\r\n            dataType: 'json',\r\n            success:function(data){\r\n              //成功\r\n              if (data.status == 1) {\r\n                JLib.config.shareUrl = JLib.config.hostname + '/fragment/' + data.fragment_guid;\r\n                JLib.config.fragment_guid = data.fragment_guid;\r\n                addFragmentToNote();\r\n              }\r\n              //失败\r\n              else {\r\n                alert(data.message);\r\n                return false;\r\n              }\r\n            }\r\n          });\r\n        }else{\r\n          JLib.config.fragment_guid = videoInfo.guid;\r\n          addFragmentToNote();\r\n        }\r\n\r\n        return false;\r\n      });\r\n\r\n      function addFragmentToNote(){\r\n        $.ajax({\r\n          'url':'/my/note/addInMyPlaylist',\r\n          'type':'POST',\r\n          'data':'playlist_id='+$('#playlist_id').val()+'&title='+$('#title').val()+'&description='+$('#description').val()+'&guid='+JLib.config.fragment_guid,\r\n          'success':function(res){\r\n            // console.log(res);\r\n            res = JSON.parse(res);\r\n            if(res.status == -1){\r\n              $.blockUI({ fadeIn: 700, fadeOut: 700, timeout: 500 ,message:'<p style=\"color:white\"> 碎片创建失败!</p>'});\r\n              return false;\r\n            }else if(res.status == -2){\r\n              $.blockUI({ fadeIn: 700, fadeOut: 700, timeout: 500 ,message:'<p style=\"color:white\"> 碎片已经存在!</p>'});\r\n              return false;\r\n            }else{\r\n              $.blockUI({ fadeIn: 700, fadeOut: 700, timeout: 500 ,message:'<p style=\"color:white\">添加成功!</p>'});\r\n              $addToNoteDialog.attr('class','modal-wrap hidden');\r\n              return false;\r\n            }\r\n          },\r\n          'error':function(){\r\n            $.blockUI({ fadeIn: 700, fadeOut: 700, timeout: 500 ,message:'<p style=\"color:white\">ajax error!</p>'});\r\n          }\r\n        })\r\n      }\r\n\r\n      $createNoteBookButton.click(function(){\r\n        $createNewPlaylist.removeClass('hidden');\r\n        $addToNoteDialog.addClass('hidden');\r\n        return false;\r\n      });\r\n\r\n      $('#cancelAddToNoteButton').click(function(){\r\n        $addToNoteDialog.attr('class','modal-wrap hidden');\r\n        return false;\r\n      });\r\n\r\n      $('#closeCreateNewPlaylist').click(function(){\r\n        $createNewPlaylist.attr('class','modal-wrap hidden');\r\n        return false;\r\n      });\r\n\r\n      $('#createNewPlaylistConfirm').click(function createPlaylist(){\r\n        $.ajax({\r\n          'url':'/note/create',\r\n          'type':'POST',\r\n          'data':$('#create_form').serialize(),\r\n          'beforeSend':function(){\r\n            //$.blockUI({message:'<img src=\"/static/hiho-edu/img/busy.gif\"/>'});\r\n          },\r\n          'success':function(data){\r\n            console.log(data);\r\n            data =  JSON.parse(data);\r\n            if(data.status == -2 || data.status ==-1){\r\n              $.blockUI({ fadeIn: 700, fadeOut: 700, timeout: 500 ,message:'<p style=\"color:white\">'+data.message+'</p>'});\r\n              return;\r\n            }\r\n            $.blockUI({ fadeIn: 700, fadeOut: 700, timeout: 500 ,message:'<p style=\"color:white\">添加成功</p>'});\r\n            $('#playlist_id').append('<option value=\"'+data.data.id+'\">'+data.data.title+'</option>');\r\n            $addToNoteDialog.attr('class','modal-wrap');\r\n            $createNewPlaylist.attr('class','modal-wrap hidden');\r\n          },\r\n          'complete':function(){\r\n\r\n          },\r\n          'error':function(){\r\n            $.blockUI({ fadeIn: 700, fadeOut: 700, timeout: 500 ,message:'<p style=\"color:white\">ajax error!</p>'});\r\n          }\r\n        });\r\n        return false;\r\n      });\r\n\r\n      $('#createNewPlaylistCancel').click(function(){\r\n        $createNewPlaylist.attr('class','modal-wrap hidden');\r\n        return false;\r\n      });\r\n\r\n      // $(document).ready(function(){\r\n        var $like = $(\".like\");\r\n        $like.click(function(){\r\n          var video_id = videoInfo.playid,\r\n            $this = $(this),\r\n            $repeat = $('.success'),\r\n            $login = $('.login');\r\n          if(!$this.hasClass('liked')){\r\n            $.post(\r\n              '/favorite/add',\r\n              {video_id:video_id},\r\n              function(data){\r\n                if(data.status == 0) {\r\n                  var liked = $(\".like\").addClass('liked').children('span').text();\r\n                  liked++;\r\n                  $(\".like\").addClass(\"liked\").children('span').text(liked);\r\n                }\r\n                else if(data.status == -1) {\r\n                  $repeat.fadeIn();\r\n                  setTimeout(function(){\r\n                    $repeat.fadeOut();\r\n                  }, 2000);\r\n                }else if(data.status == -2){\r\n                  $login.fadeIn();\r\n                  setTimeout(function(){\r\n                    $login.fadeOut();\r\n                  }, 2000);\r\n                }\r\n              },\r\n              'json'\r\n            );\r\n          }else{\r\n            $.ajax({\r\n              url: '/favorite/delete',\r\n              type: 'POST',\r\n              dataType: 'json',\r\n              data: {\r\n                playid: video_id\r\n              }\r\n            }).done(function(res){\r\n              if(res){\r\n                if(res.status == 0){\r\n                  var $count = $('.like').removeClass('liked').find('.like-count');\r\n                  $count.text(parseInt($.trim($count.text())) - 1);\r\n                }else if(res.status == -1){\r\n                  $repeat.fadeIn();\r\n                  setTimeout(function(){\r\n                    $repeat.fadeOut();\r\n                  }, 2000);\r\n                }else if(res.status == -2){\r\n                  $login.fadeIn();\r\n                  setTimeout(function(){\r\n                    $login.fadeOut();\r\n                  }, 2000);\r\n                }\r\n              }\r\n            });\r\n          }\r\n          return false;\r\n        });\r\n        $(\".close\").click(function(){\r\n          $(\".notification\").hide();\r\n        });\r\n\r\n        /*$(\"#textComment\").keyup(function(e){\r\n          var max = 124;\r\n          if(e.keyCode == 8){\r\n            var currentNum = $(\"#textComment\").val().length;\r\n            remain = max - currentNum;\r\n            if(remain <= max) {\r\n              $(\".text-count>strong\").html(remain);\r\n            }\r\n          }\r\n          else{\r\n            var content = $(\"#textComment\").val();\r\n            var currentNum = content.length;\r\n            var remain = max - currentNum;\r\n            if(currentNum <= max) {\r\n              $(\".text-count>strong\").html(remain);\r\n            }\r\n            else{\r\n              var last = content.substr(0, max);\r\n              $(\"#textComment\").val(last);\r\n            }\r\n          }\r\n        });\r\n\r\n        $(\"#btnAddComment\").click(function(){\r\n          var video_id = $(\"#hiddenVideoID\").val();\r\n          var content = $(\"#textComment\").val();\r\n          var playing_time = 2.0;\r\n    //      var playing_time = JLib.player.prototype;\r\n    //      console.log(playing_time);return;\r\n\r\n          $.post(\r\n            '/comment/add',\r\n            {video_id:video_id, playing_time:playing_time, content:content},\r\n            function(data){\r\n              var obj = $.parseJSON(data);\r\n              if(obj.status == 0){\r\n                $(\"#textComment\").val('');\r\n\r\n                var avatar = obj.comment.avatar;\r\n                var name = obj.comment.userName;\r\n                var created = obj.comment.created_at;\r\n                var content = obj.comment.content;\r\n\r\n                var commentHtml = '<div class=\"comment-item\">\\\r\n                          <div class=\"avatar\">\\\r\n                            <img src=\"' + avatar + '\" alt=\"\">\\\r\n                          </div>\\\r\n                          <div class=\"comment-content\">\\\r\n                            <div class=\"comment-user\">\\\r\n                              <!--<a href=\"javascript:void(0);\" class=\"reply\">回复</a>-->\\\r\n                              <span class=\"name\">' + name + '</span>\\\r\n                              <span>' + created + '</span>\\\r\n                            </div>\\\r\n                            <div class=\"comment-info\">\\\r\n                              <p>' + content + '</p>\\\r\n                            </div>\\\r\n                            <div class=\"text-input hidden\">\\\r\n                              <div class=\"input-w\">\\\r\n                                <textarea></textarea>\\\r\n                              </div>\\\r\n                              <div class=\"input-action\">\\\r\n                                <button class=\"button\">回复</button>\\\r\n                                <span class=\"text-count\">还剩<strong>124</strong>字</span>\\\r\n                              </div>\\\r\n                            </div>\\\r\n                          </div>\\\r\n                        </div>';\r\n                var toInsert = $(\".comment-list\").find(\".comment-item\");\r\n                if(toInsert.length > 0){\r\n                  $(commentHtml).prependTo(\".comment-item:first\");\r\n                }\r\n                else{\r\n                  $(\".comment-list\").prepend(commentHtml);\r\n                }\r\n              }\r\n            }\r\n          );\r\n        });\r\n\r\n        $(\".reply\").click(function(){\r\n          $(this).parent().siblings(\".text-input\").show();\r\n        });*/\r\n      // });\r\n\r\n    });\r\n  });\r\n});\ndefine(\"play\", function(){});\n\n"]}